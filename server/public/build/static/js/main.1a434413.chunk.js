(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{122:function(e,t,a){},123:function(e,t,a){},124:function(e,t,a){},125:function(e,t,a){},126:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(31),s=a.n(c),i=a(10),o=a(26),l=a(12),u=a.n(l),j=a(29),m=a(15),h=a(16),b=a(19),d=a(18),p=(a(47),a(129)),O=a(130),v=a(83),x=a(135),f=a(136),g=(a(95),a(82)),y=a.n(g).a.create({baseURL:"https://cine-home.herokuapp.com",withCredentials:!0}),N=(a(78),a(11)),w=a(1);function k(e){var t=e.movies,a=Object(o.a)(t);return a.sort((function(){return Math.random()-.5})),Object(w.jsx)(p.a,{children:Object(w.jsx)(O.a,{children:a.map((function(e,t){return Object(w.jsx)(v.a,{className:"movieblock",children:Object(w.jsx)(N.b,{to:{pathname:"/movie/".concat(e._id),movieId:e._id},children:Object(w.jsx)("img",{src:e.image,alt:"movies",width:"180px",height:"270px"})})},t)}))})})}var C=a(131);function S(e){var t=e.movies;if(t){C.a;var a=Object(o.a)(t);return a.sort((function(e,t){return t.imDbRating.localeCompare(e.imDbRating)})),Object(w.jsx)(p.a,{children:Object(w.jsx)(O.a,{children:a.map((function(e,t){return Object(w.jsx)(v.a,{className:"movieblock",children:Object(w.jsx)(N.b,{to:{pathname:"/movie/".concat(e._id),movieId:e._id},children:Object(w.jsx)("img",{src:e.image,alt:"movies",width:"180px",height:"270px"})})},t)}))})})}}var A=function(e){Object(b.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={movies:[],searchString:""},e.handleSearch=function(t){e.setState({searchString:t})},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=Object(j.a)(u.a.mark((function e(){var t=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y.get("/movies").then((function(e){var a=e.data;console.log("movies",a),t.setState({movies:a})})).catch((function(e){return console.error(e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=null;return t=""!==this.state.searchString&&this.state.movies.length>0?this.state.movies.filter((function(t){var a,n;return null===t||void 0===t||null===(a=t.title)||void 0===a||null===(n=a.toLowerCase())||void 0===n?void 0:n.includes(e.state.searchString.toLowerCase())})):Object(o.a)(this.state.movies),Object(w.jsx)("div",{children:Object(w.jsxs)(p.a,{children:[Object(w.jsx)(O.a,{children:Object(w.jsx)(v.a,{md:8,children:Object(w.jsx)("input",{type:"text",placeholder:"Search...",className:"inpSearch",onChange:function(t){return e.handleSearch(t.target.value)}})})}),Object(w.jsxs)(x.a,{ActiveKey:"eventKey",transition:!0,id:"noanim-tab-example",className:"mb-3",mountOnEnter:"true",variant:"pills",children:[Object(w.jsx)(f.a,{eventKey:"home",title:"Home",children:t.length&&Object(w.jsx)(k,{movies:t})}),Object(w.jsx)(f.a,{eventKey:"Top-Movies",title:"Top",children:Object(w.jsx)(S,{movies:this.state.movies.splice(5,10)})})]})]})})}}]),a}(n.Component),D=a(7),I=a(2),L=r.a.createContext(),R=function(e){var t=Object(n.useState)(null),a=Object(D.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(!0),i=Object(D.a)(s,2),o=i[0],l=i[1];Object(n.useEffect)((function(){y.get("/is-loggedin").then((function(e){l(!1),c(e.data.currentUser)})).catch((function(){c(null),l(!1)}))}),[]);var u=Boolean(r);return Object(w.jsx)(L.Provider,{value:{currentUser:r,isLoading:o,isLoggedIn:u,setCurrentUser:c},children:o?null:e.children})},F=function(e){return function(t){return Object(w.jsx)(L.Consumer,{children:function(a){return Object(w.jsx)(e,Object(I.a)(Object(I.a)({},t),{},{userContext:a}))}})}},_=function(){return Object(n.useContext)(L)};a(80);function E(e){var t=Object(n.useState)("admin@foobarbaz.io"),a=Object(D.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)("12345"),o=Object(D.a)(s,2),l=o[0],m=o[1],h=_(),b=h.isLoggedIn,d=h.setCurrentUser,O=function(){var e=Object(j.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,y.post("/signin",{email:r,password:l});case 4:a=e.sent,d(a.data.currentUser),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),d(null);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return b?Object(w.jsx)(i.a,{to:"/dashboard"}):Object(w.jsx)(p.a,{children:Object(w.jsxs)("form",{className:"form",onSubmit:O,children:[Object(w.jsx)("h1",{className:"title",children:"Signin"}),Object(w.jsx)("label",{className:"label",htmlFor:"email",children:"email"}),Object(w.jsx)("input",{className:"input",id:"email",type:"email",value:r,onChange:function(e){return c(e.target.value)}}),Object(w.jsx)("label",{className:"label",htmlFor:"password",children:"password"}),Object(w.jsx)("input",{className:"input",id:"password",type:"password",value:l,onChange:function(e){return m(e.target.value)}}),Object(w.jsx)("button",{className:"btn",children:"ok"}),Object(w.jsxs)("p",{className:"parag",children:["No account yet ? please"," ",Object(w.jsx)(N.b,{to:"/signup",className:"link",children:"signup"})]})]})})}var U=a(8),M=a(87),T=a(88);function K(e){var t=e.clbk,a=e.avatar,n=void 0===a?"":a,c=r.a.createRef();return Object(w.jsxs)("div",{className:"is-clickable icon-avatar",title:"change avatar",children:[n&&Object(w.jsx)("img",{src:n,alt:"user avatar"}),Object(w.jsx)("input",{ref:c,type:"file",className:"is-hidden",onChange:t}),Object(w.jsx)(M.a,{onClick:function(){c.current.click()},className:"is-clickable fa-lg",icon:T.a})]})}a(122);var z=function(e){Object(b.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={avatar:"",tmpAvatar:"/imag/Avatar.jpeg",username:"admin",email:"admin@foobarbaz.io",password:"12345"},e.handleSubmit=function(){var t=Object(j.a)(u.a.mark((function t(a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),(n=new FormData).append("email",e.state.email),n.append("password",e.state.password),n.append("username",e.state.username),n.append("avatar",e.state.avatar),t.prev=6,t.next=9,y.post("/signup",n);case 9:e.props.history.push("/signin"),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(6),console.error(t.t0);case 15:case"end":return t.stop()}}),t,null,[[6,12]])})));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(t){e.setState(Object(U.a)({},t.target.name,t.target.value))},e.handleImage=function(t){e.setState({avatar:t.target.files[0]},(function(){var t=new FileReader;t.onloadend=function(){var a=t.result;e.setState({tmpAvatar:a})},t.readAsDataURL(e.state.avatar)}))},e}return Object(h.a)(a,[{key:"render",value:function(){var e=this.props.userContext.isLoggedIn,t=this.state,a=t.email,n=t.password,r=t.username,c=t.tmpAvatar;return e?Object(w.jsx)(i.a,{to:"/dashboard"}):Object(w.jsx)(p.a,{children:Object(w.jsxs)("form",{className:"form",onSubmit:this.handleSubmit,onChange:this.handleChange,children:[Object(w.jsx)("h1",{className:"title",children:"Signup"}),Object(w.jsx)("label",{className:"label",id:"avatar",htmlFor:"avatar",children:Object(w.jsx)(K,{avatar:c,clbk:this.handleImage})}),Object(w.jsx)("label",{className:"label",htmlFor:"email",children:"Email"}),Object(w.jsx)("input",{className:"input",id:"email",type:"email",name:"email",defaultValue:a}),Object(w.jsx)("label",{className:"label",htmlFor:"username",children:"Username"}),Object(w.jsx)("input",{className:"input",id:"username",type:"text",name:"username",defaultValue:r}),Object(w.jsx)("label",{className:"label",htmlFor:"password",children:"Password"}),Object(w.jsx)("input",{className:"input",id:"password",type:"password",name:"password",defaultValue:n}),Object(w.jsx)("button",{className:"btn",children:"OK"}),Object(w.jsxs)("p",{className:"parag",children:["Already a member ? please"," ",Object(w.jsx)(N.b,{to:"/signin",className:"link",children:"signin"})]})]})})}}]),a}(n.Component),G=F(z);function P(){return Object(w.jsxs)("div",{children:["Oh no !!!",Object(w.jsx)("br",{}),"You seem lost friend :( ",Object(w.jsx)("br",{}),"Go back to the \xa0",Object(w.jsx)(N.b,{to:"/",children:"home page"})]})}var V=a(132),B=(a(123),a(134)),H=function(e){Object(b.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={inputText:""},e.handleInputText=function(t){e.setState({inputText:t.target.value})},e.handleAddComment=function(t){var a={comment:e.state.inputText,rate:"3",id_film:e.props.movieId,id_author:"618ffb3532facccdf54b37dc"};y.post("/comments",a).then((function(t){console.log(t),console.log(e.props),e.props.fetchAllComments(e.props.movieId)})).catch((function(e){return console.error(e)}))},e}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return Object(w.jsxs)("div",{children:[Object(w.jsx)(B.a,{children:Object(w.jsxs)(B.a.Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea1",children:[Object(w.jsx)(B.a.Control,{as:"textarea",placeholder:"Comment Here...",rows:2,onChange:function(t){return e.handleInputText(t)}})," "]})}),Object(w.jsx)(V.a,{variant:"primary",onClick:function(){return e.handleAddComment()},size:"lg",children:"Send"})]})}}]),a}(n.Component),J=function(e){var t=e.film,a=Object(n.useState)(0),r=Object(D.a)(a,2),c=r[0],s=r[1],i=Object(n.useState)(0),l=Object(D.a)(i,2),u=l[0],j=l[1],m=Object(n.useState)(!1),h=Object(D.a)(m,2),b=h[0],d=h[1],p=_().currentUser;return Object(n.useEffect)((function(){p&&y.get("/rates/".concat(p._id,"/").concat(t)).then((function(){d(!0)})).catch((function(){d(!1)}))}),[]),Object(n.useEffect)((function(){b||y.post("/rates/"+t,{rate:c,id_author:null===p||void 0===p?void 0:p._id,id_film:t}).then((function(e){})).catch((function(e){return console.error(e)}))}),[c,t,b]),Object(w.jsx)("div",{className:"star-rating",children:Object(o.a)(Array(5)).map((function(e,t){return t+=1,Object(w.jsx)("button",{type:"button",className:t<=(u||c)?"on":"off",onClick:function(){return s(t)},onMouseEnter:function(){return j(t)},onMouseLeave:function(){return j(c)},children:Object(w.jsx)("span",{className:"star",children:"\u2605"})},t)}))})},Y=function(e){var t=e.rating;return console.log(t),Object(w.jsx)("div",{className:"star-rating",children:Object(o.a)(Array(5)).map((function(e,a){return Object(w.jsx)("button",{type:"button",className:a+1<=t?"on":"off",children:Object(w.jsx)("span",{className:"star",children:"\u2605"})},a)}))})},q=(a(124),function(e){Object(b.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={title:"",year:"",image:"",director:"",duration:"",plot:"",actorList:[{image:"",name:""}],genreList:[{value:""}],imDbRating:"",usersRating:[],comments:[],avgRate:null},e.fetchAllComments=function(){var t=Object(j.a)(u.a.mark((function t(a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.get("/comments/"+a);case 3:n=t.sent,e.setState({comments:n.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),e.fetchAllRatings=function(){var t=Object(j.a)(u.a.mark((function t(a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.get("/rates/"+a);case 3:n=t.sent,e.setState({usersRating:n.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),e.handleDelete=function(){var t=Object(j.a)(u.a.mark((function t(a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.delete("/comments/".concat(a));case 3:e.fetchAllComments(e.props.match.params.id),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.error(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),e.handleEditComment=function(){var t=Object(j.a)(u.a.mark((function t(a,n,r){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(a.code),"Enter"!==a.key){t.next=11;break}return t.prev=2,t.next=5,y.patch("/comments/".concat(n),{comment:r});case 5:e.fetchAllComments(e.props.match.params.id),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e,a,n){return t.apply(this,arguments)}}(),e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=Object(j.a)(u.a.mark((function e(){var t=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y.get("/movie/".concat(this.props.match.params.id)).then((function(e){var a=e.data;t.setState({title:a.title,year:a.year,director:a.directors,duration:a.runtimeMins,plot:a.plot,image:a.image,actorList:a.actorList,genreList:a.genreList,imDbRating:a.imDbRating},(function(){t.fetchAllComments(t.props.match.params.id)}))})).catch((function(e){return console.error(e)})),this.fetchAllRatings(this.props.match.params.id);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e,t){}},{key:"render",value:function(){var e=this;return Object(w.jsxs)(p.a,{children:[Object(w.jsx)("br",{}),Object(w.jsxs)("h1",{children:[this.state.title," "]})," ",Object(w.jsxs)("span",{children:["(",this.state.year,")"]}),Object(w.jsx)("br",{}),Object(w.jsxs)(O.a,{className:"bodydetail",children:[Object(w.jsx)(v.a,{md:"auto",className:"colImag",children:Object(w.jsx)("img",{src:this.state.image,alt:"one-movie",width:"200px"})}),Object(w.jsxs)(v.a,{md:5,className:"infoText",children:[Object(w.jsxs)("span",{children:["Director: ",this.state.director]}),Object(w.jsx)("br",{}),Object(w.jsxs)("span",{children:["Duration: ",this.state.duration,"min"]}),Object(w.jsx)("br",{}),Object(w.jsxs)("span",{children:["IMDB rating : ",this.state.imDbRating]}),Object(w.jsx)("br",{}),Object(w.jsxs)("span",{className:"AGlist",children:["Genre :"," ",this.state.genreList.map((function(e,t){return Object(w.jsxs)("h6",{children:[e.value," /"]},t)}))]}),Object(w.jsx)("br",{}),Object(w.jsx)("p",{children:this.state.avgRate}),Object(w.jsxs)("span",{className:"rating",children:["User's rating : ",Object(w.jsx)(Y,{rating:this.state.avgRate})]})]}),Object(w.jsx)(O.a,{children:Object(w.jsx)(v.a,{md:10,children:Object(w.jsx)("span",{children:this.state.actorList.map((function(e,t){return Object(w.jsxs)(N.b,{to:"/actor/:id",className:"actorblok",children:[Object(w.jsx)("img",{className:"actorimgs",src:e.image,alt:e.name}),e.name]},t)}))})})})]}),Object(w.jsxs)(v.a,{md:8,className:"plot",children:[Object(w.jsx)("h5",{children:this.state.title}),Object(w.jsx)("h6",{children:this.state.plot})]}),this.state.comments.map((function(t,a){var n;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{contentEditable:(null===(n=e.props.currentUser)||void 0===n?void 0:n._id)===t.id_author||!0,className:"2",onKeyPress:function(a){return e.handleEditComment(a,t._id,a.currentTarget.textContent)},children:t.comment},a),Object(w.jsx)(V.a,{onClick:function(){return e.handleDelete(t._id)},variant:"warning",children:"Delete"})]})})),Object(w.jsxs)(O.a,{children:[Object(w.jsx)(J,{film:this.props.match.params.id}),Object(w.jsx)(H,{fetchAllComments:this.fetchAllComments,movieId:this.props.match.params.id})]})]})}}]),a}(n.Component)),Q=Object(i.g)(F(q)),W=function(e){Object(b.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={avatar:"",tmpAvatar:"/imag/Avatar.jpeg",username:"admin",email:"admin@foobarbaz.io",password:"12345"},e}return Object(h.a)(a,[{key:"render",value:function(){var e=this.state,t=(e.email,e.password,e.username);e.tmpAvatar;return Object(w.jsxs)(p.a,{children:[Object(w.jsx)("h1",{className:"title",children:"My Account"}),Object(w.jsx)("label",{className:"label",id:"avatar",htmlFor:"avatar",children:Object(w.jsx)(K,{avatar:this.state.tmpAvatar})}),Object(w.jsx)("p",{className:"label",htmlFor:"email"}),Object(w.jsx)("p",{className:"label",htmlFor:"username",children:"Username"}),Object(w.jsx)("input",{className:"input",id:"username",type:"text",name:"username",defaultValue:t})]})}}]),a}(n.Component),X=F(W),Z=(a(125),a(133)),$=a(89),ee=function(e){Object(b.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={searchField:"",movies:[],stats:[]},e}return Object(h.a)(a,[{key:"render",value:function(){var e;return Object(w.jsx)(Z.a,{bg:"dark",expand:"sm",children:Object(w.jsxs)(p.a,{children:[Object(w.jsx)(N.b,{to:"/",children:Object(w.jsx)("img",{src:"/imag/movie logo.png",alt:"movielogo",className:"movielogo"})}),Object(w.jsx)("span",{className:"ourname",children:"CINEHOME"}),Object(w.jsx)($.a,{className:"text-center mt-4 mb-4",children:(null===(e=this.props.userContext)||void 0===e?void 0:e.isLoggedIn)?Object(w.jsx)(N.b,{to:"/signout",className:"Signout",children:"Signout"}):Object(w.jsx)(N.b,{to:"/signin",className:"Signin",children:"Signin"})})]})})}}]),a}(n.Component),te=F(ee);function ae(){return Object(w.jsx)(R,{children:Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("header",{children:Object(w.jsx)(te,{})}),Object(w.jsx)("main",{id:"content_main",children:Object(w.jsxs)(i.d,{children:[Object(w.jsx)(i.b,{exact:!0,path:"/",component:A}),Object(w.jsx)(i.b,{path:"/signin",component:E}),Object(w.jsx)(i.b,{path:"/signup",component:G}),Object(w.jsx)(i.b,{path:"/movie/:id",component:Q}),Object(w.jsx)(i.b,{path:"/dashboard",component:X}),Object(w.jsx)(i.b,{path:"*",component:P}),Object(w.jsx)(i.b,{path:"/signout",component:A})]})}),Object(w.jsx)("footer",{children:"\xa9Priscilla | Joey | Yuki"})]})})}s.a.render(Object(w.jsx)(r.a.StrictMode,{children:Object(w.jsx)(N.a,{children:Object(w.jsx)(ae,{})})}),document.getElementById("root"))},78:function(e,t,a){},80:function(e,t,a){},95:function(e,t,a){}},[[126,1,2]]]);
//# sourceMappingURL=main.1a434413.chunk.js.map