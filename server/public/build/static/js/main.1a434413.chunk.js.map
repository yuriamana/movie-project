{"version":3,"sources":["api/APIHandler.jsx","components/AllMovies.jsx","components/TopMovies.jsx","views/Home.jsx","auth/UserContext.js","views/Signin.jsx","components/icon/IconAvatarAdmin.jsx","views/Signup.jsx","views/NotFound.jsx","components/form/FormCreateComment.jsx","components/StarRating.jsx","components/UserStarRatingDisplay.jsx","views/MovieDetail.jsx","views/MyAccount.jsx","components/Nav.jsx","App.js","index.js"],"names":["APIHandler","axios","create","baseURL","process","withCredentials","AllMovies","movies","copy","sort","Math","random","Container","Row","map","movie","i","Col","className","to","pathname","_id","movieId","src","image","alt","width","height","TopMovies","Spinner","a","b","imDbRating","localeCompare","Home","state","searchString","handleSearch","text","setState","get","then","data","console","log","catch","apiErr","error","moviesToDisplay","this","length","filter","title","toLowerCase","includes","md","type","placeholder","onChange","e","target","value","Tabs","ActiveKey","transition","id","mountOnEnter","variant","Tab","eventKey","splice","Component","UserContext","React","createContext","UserContextProvider","props","useState","currentUser","setCurrentUser","isLoading","setIsLoading","useEffect","res","isLoggedIn","Boolean","Provider","children","withAuth","MyComponent","Consumer","context","userContext","useAuth","useContext","Signin","email","setEmail","password","setPassword","handleSubmit","preventDefault","post","apiRes","onSubmit","htmlFor","IconAvatar","clbk","avatar","fileInput","createRef","ref","onClick","current","click","icon","faCog","Signup","tmpAvatar","username","fd","FormData","append","history","push","handleChange","name","handleImage","files","reader","FileReader","onloadend","baseString","result","readAsDataURL","defaultValue","Page404","FormCreateComment","inputText","handleInputText","val","handleAddComment","myComment","comment","rate","id_film","id_author","fetchAllComments","Form","Group","controlId","Control","as","rows","Button","size","StarRating","film","rating","setRating","hover","setHover","alreadyRated","setAlreadyRated","doc","Array","star","index","onMouseEnter","onMouseLeave","UserStarRatingDisplay","MovieDetail","year","director","duration","plot","actorList","genreList","usersRating","comments","avgRate","fetchAllRatings","handleDelete","delete","match","params","handleEditComment","code","key","patch","directors","runtimeMins","prevProps","prevState","genre","actor","contentEditable","onKeyPress","currentTarget","textContent","withRouter","MyAccount","Navi","searchField","stats","Navbar","bg","expand","Nav","App","exact","path","component","NotFound","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.1a434413.chunk.js","sourcesContent":["import axios from \"axios\";\r\n\r\nconst APIHandler = (() => {\r\n  return axios.create({\r\n    baseURL: process.env.REACT_APP_BACKEND_URL,\r\n    withCredentials: true,\r\n  });\r\n})();\r\n\r\nexport default APIHandler;\r\n","import React from \"react\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport { Row, Container, Col } from \"react-bootstrap\";\r\nimport \"./../styles/AllMovies.css\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default function AllMovies({ movies }) {\r\n  const copy = [...movies]\r\n  copy.sort((() => {return Math.random()-0.5;}))\r\n  return (\r\n    <Container>\r\n      <Row>\r\n        {copy.map((movie, i) => (\r\n          <Col key={i} className=\"movieblock\">\r\n            <Link\r\n              to={{\r\n                pathname: `/movie/${movie._id}`,\r\n                movieId: movie._id,\r\n              }}\r\n            >\r\n              <img\r\n                src={movie.image}\r\n                alt=\"movies\"\r\n                width=\"180px\"\r\n                height=\"270px\"\r\n              />\r\n            </Link>\r\n          </Col>\r\n        ))}\r\n      </Row>\r\n    </Container>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport { Row, Container, Col, Spinner } from \"react-bootstrap\";\r\nimport \"./../styles/AllMovies.css\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\n\r\nexport default function TopMovies({ movies }) {\r\n    if(!movies) return \r\n    <Spinner animation=\"border\" role=\"status\">\r\n    <span className=\"visually-hidden\">Loading...</span>\r\n    </Spinner>\r\n    const copy = [...movies]\r\n    copy.sort((a, b) => b.imDbRating.localeCompare(a.imDbRating))\r\n        return (\r\n    <Container>\r\n      <Row>\r\n        {copy.map((movie , i) => (\r\n          <Col key={i} className=\"movieblock\">\r\n\r\n            <Link\r\n              to={{\r\n                pathname: `/movie/${movie._id}`,\r\n                movieId: movie._id,\r\n              }}\r\n            >\r\n              <img\r\n                src={movie.image}\r\n                alt=\"movies\"\r\n                width=\"180px\"\r\n                height=\"270px\"\r\n              />\r\n            </Link>\r\n          </Col>\r\n        ))}\r\n      </Row>\r\n    </Container>\r\n  );\r\n}\r\n","import React, { Component } from \"react\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport { Container, Tabs, Tab,Row, Col } from \"react-bootstrap\";\r\n// import { Link } from \"react-router-dom\";\r\nimport \"./../styles/home.css\";\r\nimport APIHandler from \"./../api/APIHandler\";\r\nimport AllMovies from \"../components/AllMovies\";\r\nimport TopMovies from \"../components/TopMovies\";\r\n\r\nexport default class Home extends Component {\r\n  state = {\r\n    movies: [],\r\n    searchString: ''\r\n  };\r\n  handleSearch = (text) => {\r\n    this.setState({searchString: text})\r\n  }\r\n  async componentDidMount() {\r\n    APIHandler.get(\"/movies\")\r\n      .then(({ data }) => {\r\n        console.log(\"movies\", data);\r\n        this.setState({\r\n          movies: data,\r\n        });\r\n      })\r\n      .catch((apiErr) => console.error(apiErr));\r\n  }\r\n\r\n  render() {\r\n    //Filter here \r\n\r\n    let moviesToDisplay = null\r\n\r\n    if (this.state.searchString !== '' && this.state.movies.length > 0) {\r\n      moviesToDisplay = this.state.movies.filter(movie => {\r\n        return movie?.title?.toLowerCase()?.includes(this.state.searchString.toLowerCase())\r\n      })\r\n    } else {\r\n      moviesToDisplay = [...this.state.movies]\r\n    }\r\n      return (\r\n        <div>\r\n        <Container>\r\n        <Row>\r\n          <Col md={8}>\r\n          <input type=\"text\" placeholder=\"Search...\" className=\"inpSearch\" onChange={(e) => this.handleSearch(e.target.value)}/> \r\n          </Col>\r\n        </Row>\r\n          <Tabs\r\n            ActiveKey=\"eventKey\"\r\n            transition={true}\r\n            id=\"noanim-tab-example\"\r\n            className=\"mb-3\"\r\n            mountOnEnter=\"true\"\r\n            variant='pills'\r\n          >\r\n            <Tab eventKey=\"home\" title=\"Home\">\r\n              {moviesToDisplay.length && <AllMovies movies={moviesToDisplay} />}\r\n            </Tab>\r\n            <Tab eventKey=\"Top-Movies\" title=\"Top\">\r\n              <TopMovies movies={(this.state.movies).splice(5,10)}/>\r\n            </Tab>\r\n          </Tabs>\r\n          </Container>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n","import React, { useContext, useState, useEffect } from \"react\";\r\nimport APIHandler from \"./../api/APIHandler\";\r\n\r\nexport const UserContext = React.createContext();\r\n\r\n/**\r\n *\r\n * @param {Object} props\r\n * @returns a Provider wrappinng the authentication logic\r\n */\r\nexport const UserContextProvider = (props) => {\r\n  const [currentUser, setCurrentUser] = useState(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    APIHandler.get(\"/is-loggedin\")\r\n      .then((res) => {\r\n        setIsLoading(false);\r\n        setCurrentUser(res.data.currentUser);\r\n      })\r\n      .catch(() => {\r\n        setCurrentUser(null);\r\n        setIsLoading(false);\r\n      });\r\n  }, []);\r\n\r\n  const isLoggedIn = Boolean(currentUser); // checked on every render => passed to the\r\n\r\n  return (\r\n    <UserContext.Provider\r\n      value={{ currentUser, isLoading, isLoggedIn, setCurrentUser }}\r\n    >\r\n      {!isLoading ? props.children : null}\r\n    </UserContext.Provider>\r\n  );\r\n};\r\n\r\n/**\r\n * provide the UserContext to class/ based components\r\n * in  classes, the UserContext is bound to this.props.userContext\r\n * @param {React.Component} MyComponent any class based component\r\n * @returns A consumer component accessign the values exposed by the UserContext\r\n */\r\nexport const withAuth = (MyComponent) => {\r\n  return (props) => {\r\n    return (\r\n      <UserContext.Consumer>\r\n        {(context) => {\r\n          return <MyComponent {...props} userContext={context} />;\r\n        }}\r\n      </UserContext.Consumer>\r\n    );\r\n  };\r\n};\r\n\r\n/**\r\n * a utility function (shortcut) so you don't have to import the Context + useContext in you app's functionnal components\r\n * @returns\r\n */\r\nexport const useAuth = () => useContext(UserContext);\r\n","import React, { useState } from \"react\";\r\n\r\nimport { Link, Redirect } from \"react-router-dom\";\r\n// custom tools\r\nimport { useAuth } from \"../auth/UserContext\";\r\nimport APIHandler from \"../api/APIHandler\";\r\nimport \"./../styles/form.css\";\r\nimport { Container } from \"react-bootstrap\";\r\n\r\nexport default function Signin(props) {\r\n  const [email, setEmail] = useState(\"admin@foobarbaz.io\");\r\n  const [password, setPassword] = useState(\"12345\");\r\n  const { isLoggedIn, setCurrentUser } = useAuth();\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const apiRes = await APIHandler.post(\"/signin\", { email, password });\r\n      setCurrentUser(apiRes.data.currentUser);\r\n    } catch (err) {\r\n      setCurrentUser(null);\r\n    }\r\n  };\r\n\r\n  return isLoggedIn ? (\r\n    <Redirect to=\"/dashboard\" />\r\n  ) : (\r\n    <Container>\r\n    <form className=\"form\" onSubmit={handleSubmit}>\r\n      <h1 className=\"title\">Signin</h1>\r\n      <label className=\"label\" htmlFor=\"email\">\r\n        email\r\n      </label>\r\n      <input\r\n        className=\"input\"\r\n        id=\"email\"\r\n        type=\"email\"\r\n        value={email}\r\n        onChange={(e) => setEmail(e.target.value)}\r\n      />\r\n      <label className=\"label\" htmlFor=\"password\">\r\n        password\r\n      </label>\r\n      <input\r\n        className=\"input\"\r\n        id=\"password\"\r\n        type=\"password\"\r\n        value={password}\r\n        onChange={(e) => setPassword(e.target.value)}\r\n      />\r\n      <button className=\"btn\">ok</button>\r\n      <p className=\"parag\">\r\n        No account yet ? please{\" \"}\r\n        <Link to=\"/signup\" className=\"link\">\r\n          signup\r\n        </Link>\r\n      </p>\r\n    </form>\r\n    </Container>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faCog } from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nexport default function IconAvatar({ clbk, avatar= \"\"}) {\r\n  const fileInput = React.createRef();\r\n\r\n  const handleClick = () => {\r\n    fileInput.current.click();\r\n  };\r\n\r\n  return (\r\n    <div className={\"is-clickable icon-avatar\"} title=\"change avatar\">\r\n      {avatar && <img src={avatar} alt=\"user avatar\" />}\r\n      <input\r\n        ref={fileInput}\r\n        type=\"file\"\r\n        className=\"is-hidden\"\r\n        onChange={clbk}\r\n      />\r\n      <FontAwesomeIcon\r\n        onClick={handleClick}\r\n        className=\"is-clickable fa-lg\"\r\n        icon={faCog}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link, Redirect } from \"react-router-dom\";\r\n// custom tools\r\nimport { Container } from \"react-bootstrap\";\r\nimport APIHandler from \"../api/APIHandler\";\r\nimport IconAvatarAdmin from \"../components/icon/IconAvatarAdmin\";\r\nimport { withAuth } from \"../auth/UserContext\";\r\n// styles\r\nimport \"./../styles/form.css\";\r\nimport \"./../styles/icon-avatar.css\";\r\n\r\nclass Signup extends Component {\r\n  state = {\r\n    avatar: \"\",\r\n    tmpAvatar: \"/imag/Avatar.jpeg\",\r\n    username: \"admin\",\r\n    email: \"admin@foobarbaz.io\",\r\n    password: \"12345\",\r\n  };\r\n\r\n  handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    const fd = new FormData();\r\n    // create a form data (programatic form, to send the file as binary)\r\n    fd.append(\"email\", this.state.email);\r\n    fd.append(\"password\", this.state.password);\r\n    fd.append(\"username\", this.state.username);\r\n    fd.append(\"avatar\", this.state.avatar);\r\n\r\n    try {\r\n      await APIHandler.post(\"/signup\", fd);\r\n      this.props.history.push(\"/signin\");\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  handleChange = (e) => {\r\n    this.setState({ [e.target.name]: e.target.value });\r\n  };\r\n\r\n  handleImage = (e) => {\r\n    // console.log(\"Signup@handle image\", e.target.files[0]);\r\n    this.setState({ avatar: e.target.files[0] }, () => {\r\n      const reader = new FileReader();\r\n      reader.onloadend = () => {\r\n        // when the fileREader ends  ...\r\n        const baseString = reader.result; // get the image as a base64 encoded string\r\n        this.setState({ tmpAvatar: baseString }); // set the tmp avatar as an image source before upload\r\n      };\r\n      reader.readAsDataURL(this.state.avatar); // read the file from the local disk\r\n    });\r\n  };\r\n\r\n  render() {\r\n    // console.log(this.props);\r\n    const { isLoggedIn } = this.props.userContext;\r\n    const { email, password, username, tmpAvatar } = this.state;\r\n    return isLoggedIn ? (\r\n      // avoid the component to be rendered if user is already logged in\r\n      <Redirect to=\"/dashboard\" />\r\n    ) : (\r\n      <Container>\r\n      <form\r\n        className=\"form\"\r\n        onSubmit={this.handleSubmit}\r\n        onChange={this.handleChange}\r\n      >\r\n        <h1 className=\"title\">Signup</h1>\r\n        <label className=\"label\" id=\"avatar\" htmlFor=\"avatar\">\r\n        <IconAvatarAdmin avatar={tmpAvatar} clbk={this.handleImage} />\r\n        </label>\r\n        <label className=\"label\" htmlFor=\"email\">\r\n          Email\r\n        </label>\r\n        <input\r\n          className=\"input\"\r\n          id=\"email\"\r\n          type=\"email\"\r\n          name=\"email\"\r\n          defaultValue={email}\r\n        />\r\n        <label className=\"label\" htmlFor=\"username\">\r\n          Username\r\n        </label>\r\n        <input\r\n          className=\"input\"\r\n          id=\"username\"\r\n          type=\"text\"\r\n          name=\"username\"\r\n          defaultValue={username}\r\n        />\r\n        <label className=\"label\" htmlFor=\"password\">\r\n          Password\r\n        </label>\r\n        <input\r\n          className=\"input\"\r\n          id=\"password\"\r\n          type=\"password\"\r\n          name=\"password\"\r\n          defaultValue={password}\r\n        />\r\n        <button className=\"btn\">OK</button>\r\n        <p className=\"parag\">\r\n          Already a member ? please{\" \"}\r\n          <Link to=\"/signin\" className=\"link\">\r\n            signin\r\n          </Link>\r\n        </p>\r\n      </form>\r\n      </Container>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withAuth(Signup);\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default function Page404() {\r\n  return (\r\n    <div>\r\n      Oh no !!!\r\n      <br />\r\n      You seem lost friend :( <br />\r\n      Go back to the &nbsp;<Link to=\"/\">home page</Link>\r\n    </div>\r\n  );\r\n}\r\n","import React, { Component } from \"react\";\r\nimport APIHandler from \"../../api/APIHandler\";\r\nimport { Form, Button }from \"react-bootstrap\"\r\n// comment recuperer le user connecte dans ce composqnt \r\n// pour envoyer le id_author dans le post /comments ?\r\n\r\nexport default class FormCreateComment extends Component {\r\n  state = {\r\n    inputText: \"\",\r\n  };\r\n\r\n  handleInputText = (val) => {\r\n    this.setState({\r\n      inputText: val.target.value,\r\n    });\r\n  };\r\n\r\n  handleAddComment = (e) => {\r\n    // console.log(\"here\");\r\n    let myComment = {\r\n      comment: this.state.inputText,\r\n      rate: \"3\",\r\n      id_film: this.props.movieId,\r\n      id_author: \"618ffb3532facccdf54b37dc\"\r\n    };\r\n    // console.log(\"be4 post\");\r\n    APIHandler.post(\"/comments\", myComment)\r\n      .then((res) => {\r\n        // console.log(\"after post result\");\r\n        // passer l'info au parent (un comme nt a été ajouté )\r\n        // le parent fetch tousles comments (les anciens + le nouveau) puis setState(comments)\r\n        // du coup re-render et on peut afficher la liste des comments\r\n        console.log(res);\r\n        console.log(this.props);\r\n        this.props.fetchAllComments(this.props.movieId);\r\n      })\r\n      .catch((apiErr) => console.error(apiErr));\r\n    // console.log(\"after post\");\r\n  };\r\n\r\n  render() {\r\n    // function simulateNetworkRequest() {\r\n    //   return new Promise((resolve) => setTimeout(resolve, 2000));\r\n    // }\r\n    \r\n    // function LoadingButton() {\r\n    //   const [isLoading, setLoading] = useState(false);\r\n    \r\n    //   useEffect(() => {\r\n    //     if (isLoading) {\r\n    //       simulateNetworkRequest().then(() => {\r\n    //         setLoading(false);\r\n    //       });\r\n    //     }\r\n    //   }, [isLoading]);\r\n    \r\n    //   const handleClick = () => setLoading(true);\r\n    return (\r\n      <div>\r\n      <Form>\r\n          <Form.Group className=\"mb-3\" controlId=\"exampleForm.ControlTextarea1\">\r\n          <Form.Control as=\"textarea\" placeholder=\"Comment Here...\" rows={2} onChange={(value) => this.handleInputText(value)}/>\r\n          {' '}</Form.Group>\r\n      </Form>\r\n        <Button \r\n        variant=\"primary\"\r\n        // disabled={isLoading}\r\n        // onClick={!isLoading ? handleClick : null}\r\n        onClick={() => this.handleAddComment()} size=\"lg\">\r\n          Send\r\n        </Button>\r\n      </div>\r\n    );\r\n    \r\n  }\r\n}  \r\n","import React, { useState, useEffect } from \"react\";\r\nimport APIHandler from \"../api/APIHandler\";\r\nimport {useAuth} from '../auth/UserContext'\r\nconst StarRating = ({film}) => {\r\n    const [rating, setRating] = useState(0);\r\n    const [hover, setHover] = useState(0);\r\n    const [alreadyRated, setAlreadyRated] = useState(false)\r\n    const {currentUser} = useAuth()\r\n    useEffect(() => {\r\n      if(currentUser) {\r\n        APIHandler.get(`/rates/${currentUser._id}/${film}`)\r\n        .then(() => {\r\n          setAlreadyRated(true)\r\n        })\r\n        .catch(() => {\r\n          setAlreadyRated(false)\r\n        })\r\n      }\r\n    },[])\r\n\r\n  useEffect(() => {\r\n    if (!alreadyRated) {\r\n      APIHandler.post('/rates/'+ film, {rate:rating, id_author: currentUser?._id, id_film: film}).then((doc) => {\r\n       \r\n      }).catch(e => console.error(e))\r\n    }\r\n  },[rating, film, alreadyRated])\r\n\r\n    return (\r\n      <div className=\"star-rating\">\r\n        {[...Array(5)].map((star, index) => {\r\n          index += 1;\r\n          return (\r\n            <button\r\n              type=\"button\"\r\n              key={index}\r\n              className={index <= (hover || rating) ? \"on\" : \"off\"}\r\n              onClick={() => setRating(index)}\r\n              onMouseEnter={() => setHover(index)}\r\n              onMouseLeave={() => setHover(rating)}\r\n            >\r\n              <span className=\"star\">&#9733;</span>\r\n            </button>\r\n\r\n          );\r\n        })}\r\n      </div>\r\n    );\r\n  };\r\n\r\nexport default StarRating\r\n\r\n","import React from \"react\";\r\n\r\nconst UserStarRatingDisplay = ({rating}) => {\r\n\r\n  // ajouter les notes pour chaque film\r\n\r\n  console.log(rating)\r\n    return (\r\n      <div className=\"star-rating\">\r\n      {/* if(!rating) {\r\n        \"No user's rating yet\"\r\n      } */}\r\n        {[...Array(5)].map((star, index) => {\r\n\r\n          return (\r\n            <button\r\n              type=\"button\"\r\n              key={index}\r\n              className={index + 1 <= rating  ? \"on\" : \"off\"}\r\n            >\r\n              <span className=\"star\">&#9733;</span>\r\n            </button>\r\n\r\n          );\r\n        })}\r\n      </div>\r\n    );\r\n  };\r\n\r\nexport default UserStarRatingDisplay\r\n\r\n","import React, { Component } from \"react\";\r\nimport APIHandler from \"./../api/APIHandler\";\r\nimport { Container, Row, Col, Button} from \"react-bootstrap\";\r\nimport \"./../styles/MovieDetail.css\";\r\nimport FormCreateComment from \"../components/form/FormCreateComment\";\r\nimport { Link } from \"react-router-dom\";\r\n// import LikeButton from \"../components/LikeButton\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport StarRating from \"../components/StarRating.jsx\";\r\nimport UserStarRatingDisplay from \"../components/UserStarRatingDisplay\";\r\nimport \"./../styles/stars.css\";\r\nimport { withAuth } from \"./../auth/UserContext.js\";\r\n\r\nclass MovieDetail extends Component {\r\n  state = {\r\n    title: \"\",\r\n    year: \"\",\r\n    image: \"\",\r\n    director: \"\",\r\n    duration: \"\",\r\n    plot: \"\",\r\n    actorList: [\r\n      {\r\n        image: \"\",\r\n        name: \"\",\r\n      },\r\n    ],\r\n    genreList: [\r\n      {\r\n        value: \"\",\r\n      },\r\n    ],\r\n    imDbRating: \"\",\r\n    usersRating: [],\r\n    comments: [],\r\n    avgRate: null\r\n  };\r\n\r\n  async componentDidMount() {\r\n    // console.log(\"MovieDetqils componentDidMount\");\r\n    // console.log(\"====================================\");\r\n    // console.log(this.props.currentUser);\r\n    // console.log(\"====================================\");\r\n    //   console.log(this.props.location.movieId)\r\n    //this.props are properties you give to an object when you create so you can access/use them\r\n    //for ex Link with a props \"to=\" create a new object (movie detail) and provide its properties\r\n    APIHandler.get(`/movie/${this.props.match.params.id}`)\r\n      .then(({ data }) => {\r\n        this.setState(\r\n          {\r\n            title: data.title,\r\n            year: data.year,\r\n            director: data.directors,\r\n            duration: data.runtimeMins,\r\n            plot: data.plot,\r\n            image: data.image,\r\n            actorList: data.actorList,\r\n            genreList: data.genreList,\r\n            imDbRating: data.imDbRating,\r\n            // usersRating: data.usersRating,\r\n          },\r\n          () => {\r\n            this.fetchAllComments(this.props.match.params.id);\r\n          }\r\n        );\r\n      })\r\n      .catch((apiErr) => console.error(apiErr));\r\n    this.fetchAllRatings(this.props.match.params.id);\r\n  }\r\n  // aussi fetch tous les comments de ce films et setState comments\r\n  componentDidUpdate(prevProps, prevState) {\r\n    // let tmp\r\n    // if (prevProps === this.state) {\r\n    //   let avgRate = 0\r\n    //   if (this.state.usersRating.length > 0) {\r\n    //    tmp = (\r\n    //       this.state.usersRating.reduce((acc, val) => acc + val.rate, 0) /\r\n    //       this.state.usersRating.length\r\n    //     ).toFixed(2);\r\n    //   }\r\n      \r\n    // }\r\n    // this.setState({\r\n    //   avgRate: tmp,\r\n    // })\r\n  }\r\n  fetchAllComments = async (id) => {\r\n    // console.log(\"fetchAllComments\");\r\n    // console.log(id);\r\n\r\n    // req ajax ici\r\n    try {\r\n      const res = await APIHandler.get(\"/comments/\" + id);\r\n      // console.log(\"fetched all comments for ID\", id, res.data);\r\n      this.setState({\r\n        comments: res.data,\r\n      });\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  fetchAllRatings = async (id) => {\r\n    try {\r\n      const res = await APIHandler.get(\"/rates/\" + id);\r\n      this.setState({\r\n        usersRating: res.data,\r\n      });\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  handleDelete = async (id) => {\r\n    try {\r\n      await APIHandler.delete(`/comments/${id}`);\r\n      this.fetchAllComments(this.props.match.params.id);\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  handleEditComment = async (e, id, text) => {\r\n    console.log(e.code);\r\n    if (e.key === \"Enter\") {\r\n      try {\r\n        await APIHandler.patch(`/comments/${id}`, { comment: text });\r\n        this.fetchAllComments(this.props.match.params.id);\r\n      } catch (err) {\r\n        console.error(err);\r\n      }\r\n    }\r\n  };\r\n\r\n  render() {\r\n    // console.log(this.props)\r\n    // console.log(\"render()\");\r\n    // console.log(this.state.usersRating);\r\n   \r\n\r\n    // console.log(avgRate);\r\n    return (\r\n      <Container>\r\n        <br />\r\n        <h1>{this.state.title} </h1> <span>({this.state.year})</span>\r\n        <br />\r\n        <Row className=\"bodydetail\">\r\n          <Col md=\"auto\" className=\"colImag\">\r\n            <img src={this.state.image} alt=\"one-movie\" width=\"200px\" />\r\n          </Col>\r\n\r\n          <Col md={5} className=\"infoText\">\r\n            <span>Director: {this.state.director}</span>\r\n            <br />\r\n            <span>Duration: {this.state.duration}min</span>\r\n            <br />\r\n            {/* <span className=\"AGlist\">\r\n              Actors:{\" \"}\r\n              {this.state.actorList.map((actor, i) => (\r\n                <h6 key={i}>{actor.name} /</h6>\r\n              ))}\r\n            </span>\r\n            <br /> */}\r\n            <span>IMDB rating : {this.state.imDbRating}</span>\r\n            <br />\r\n            <span className=\"AGlist\">\r\n              Genre :{\" \"}\r\n              {this.state.genreList.map((genre, i) => (\r\n                <h6 key={i}>{genre.value} /</h6>\r\n              ))}\r\n            </span>\r\n            <br />\r\n            <p>{this.state.avgRate}</p>\r\n            <span className=\"rating\">\r\n              User's rating : <UserStarRatingDisplay rating={this.state.avgRate} />\r\n            </span>\r\n          </Col>\r\n          <Row>\r\n            <Col md={10}>\r\n              <span>\r\n                {this.state.actorList.map((actor, i) => (\r\n                  <Link to=\"/actor/:id\" className=\"actorblok\" key={i}>\r\n                    <img\r\n                      className=\"actorimgs\"\r\n                      src={actor.image}\r\n                      alt={actor.name}\r\n                    />\r\n                    {actor.name}\r\n                  </Link>\r\n                ))}\r\n              </span>\r\n            </Col>\r\n          </Row>\r\n        </Row>\r\n        <Col md={8} className=\"plot\">\r\n          <h5>{this.state.title}</h5>\r\n          <h6>{this.state.plot}</h6>\r\n        </Col>\r\n        {/* <Row>\r\n          <StarRating film={this.props.match.params.id} />\r\n          <FormCreateComment\r\n            fetchAllComments={this.fetchAllComments}\r\n            movieId={this.props.match.params.id}\r\n          />\r\n        </Row> */}\r\n        {this.state.comments.map((comment, i) => {\r\n          return (\r\n            <>\r\n              <div\r\n                contentEditable= {\r\n                this.props.currentUser?._id === comment.id_author || true\r\n                }\r\n                key={i}\r\n                className=\"2\"\r\n                onKeyPress={(e) =>\r\n                  this.handleEditComment(\r\n                    e,\r\n                    comment._id,\r\n                    e.currentTarget.textContent\r\n                  )\r\n                }\r\n              >\r\n                {comment.comment}\r\n              </div>\r\n              <Button onClick={() => this.handleDelete(comment._id)} variant=\"warning\">\r\n                Delete\r\n              </Button>\r\n            </>\r\n          );\r\n        })}\r\n        <Row>\r\n          <StarRating film={this.props.match.params.id} />\r\n          <FormCreateComment\r\n            fetchAllComments={this.fetchAllComments}\r\n            movieId={this.props.match.params.id}\r\n          />\r\n        </Row>\r\n      </Container>\r\n    );\r\n  }\r\n}\r\nexport default withRouter(withAuth(MovieDetail));\r\n","import React, { Component } from \"react\";\r\n// // import APIHandler from \"./../api/APIHandler\";\r\n// // import { withAuth } from \"./../auth/UserContext.js\";\r\n// import { Link, Redirect } from \"react-router-dom\";\r\n// // custom tools\r\nimport { Container } from \"react-bootstrap\";\r\n// import APIHandler from \"../api/APIHandler\";\r\nimport IconAvatarAdmin from \"../components/icon/IconAvatarAdmin\";\r\nimport { withAuth } from \"../auth/UserContext\";\r\n// // styles\r\n// import \"./../styles/form.css\";\r\n// import \"./../styles/icon-avatar.css\";\r\n\r\nclass MyAccount extends Component {\r\n  state = {\r\n    avatar: \"\",\r\n    tmpAvatar: \"/imag/Avatar.jpeg\",\r\n    username: \"admin\",\r\n    email: \"admin@foobarbaz.io\",\r\n    password: \"12345\",\r\n  };\r\n   \r\n\r\n\r\n  render() {\r\n    const { email, password, username, tmpAvatar } = this.state;\r\n\r\n    return (\r\n    \r\n    <Container>\r\n       <h1 className=\"title\">My Account</h1>\r\n\r\n        <label className=\"label\" id=\"avatar\" htmlFor=\"avatar\">\r\n         <IconAvatarAdmin avatar={this.state.tmpAvatar} />\r\n        </label>\r\n\r\n        <p className=\"label\" htmlFor=\"email\">\r\n           {}\r\n        </p>\r\n     \r\n        <p className=\"label\" htmlFor=\"username\">\r\n          Username\r\n        </p>\r\n        <input\r\n          className=\"input\"\r\n          id=\"username\"\r\n          type=\"text\"\r\n          name=\"username\"\r\n          defaultValue={username}\r\n        />\r\n\r\n    </Container>\r\n   );\r\n  }\r\n}\r\n\r\nexport default withAuth(MyAccount) // HOC => encapsule ta classe et lui donne en props les infos de l'auth\r\n\r\n// //on veut display seulement les films que le user a commenté/raté\r\n","import React, { Component } from \"react\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport { Link } from \"react-router-dom\";\r\nimport \"./../styles/nav.css\";\r\nimport { Container, Navbar, Nav } from \"react-bootstrap\";\r\nimport { withAuth } from \"../auth/UserContext\";\r\nclass Navi extends Component {\r\n  state = {\r\n    searchField: \"\",\r\n    movies: [],\r\n    stats: [],\r\n  }\r\n  \r\n  render() {\r\n\r\n    return (\r\n      <Navbar bg=\"dark\" expand=\"sm\">\r\n        <Container>\r\n            <Link to=\"/\">\r\n              <img\r\n                src=\"/imag/movie logo.png\"\r\n                alt=\"movielogo\"\r\n                className=\"movielogo\"\r\n              />\r\n            </Link>\r\n            \r\n            <span className=\"ourname\">CINEHOME</span>\r\n\r\n          <Nav className=\"text-center mt-4 mb-4\">\r\n          {!this.props.userContext?.isLoggedIn ? (<Link to=\"/signin\" className=\"Signin\">Signin</Link>) \r\n          : (<Link to=\"/signout\" className=\"Signout\">Signout</Link>)}\r\n          </Nav>\r\n\r\n        </Container>\r\n      </Navbar>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withAuth(Navi)","import React from \"react\";\r\nimport { Route, Switch } from \"react-router-dom\";\r\n// pages components\r\nimport Home from \"./views/Home\";\r\n// import Dashboard from \"./views/Dashboard\";\r\nimport Signin from \"./views/Signin\";\r\nimport Signup from \"./views/Signup\";\r\nimport NotFound from \"./views/NotFound\";\r\nimport MovieDetail from \"./views/MovieDetail\";\r\nimport MyAccount from \"./views/MyAccount\";\r\n\r\n\r\n// partials\r\nimport NavMain from \"./components/Nav\";\r\n// auth\r\nimport { UserContextProvider } from \"./auth/UserContext\";\r\n// import { ProtectedRoute } from \"./auth/ProtectedRoute\";\r\n// styles\r\n// import \"./styles/nav.css\";\r\n\r\nexport default function App() {\r\n\r\n\r\n  \r\n\r\n  return (\r\n    <UserContextProvider>\r\n      <>\r\n        <header>\r\n          <NavMain />\r\n        </header>\r\n        <main id=\"content_main\">\r\n         <Switch>\r\n            <Route exact path=\"/\" component={Home} />\r\n            <Route path=\"/signin\" component={Signin} />\r\n            <Route path=\"/signup\" component={Signup} />\r\n            <Route path=\"/movie/:id\" component={MovieDetail} />\r\n            {/* check the protected route in src/auth folder */}\r\n            <Route path=\"/dashboard\" component={MyAccount} />\r\n            {/* <Route path=\"/comment\" component={Comment} /> */}\r\n            <Route path=\"*\" component={NotFound} />\r\n            <Route path=\"/signout\" component={Home} />\r\n          </Switch> \r\n        </main>\r\n        <footer>&copy;Priscilla | Joey | Yuki</footer>\r\n      </>\r\n    </UserContextProvider>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n// import './index.css';\r\nimport App from './App';\r\nimport { BrowserRouter } from \"react-router-dom\";\r\n// import reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n  <BrowserRouter>\r\n    <App />\r\n  </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\n// reportWebVitals();\r\n"],"sourceRoot":""}