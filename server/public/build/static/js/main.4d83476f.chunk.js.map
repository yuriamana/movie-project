{"version":3,"sources":["api/APIHandler.jsx","components/AllMovies.jsx","components/TopMovies.jsx","views/Home.jsx","auth/UserContext.js","views/Signin.jsx","components/icon/IconAvatarAdmin.jsx","views/Signup.jsx","views/NotFound.jsx","components/form/FormCreateComment.jsx","components/StarRating.jsx","components/UserStarRatingDisplay.jsx","views/MovieDetail.jsx","views/MyAccount.jsx","components/Nav.jsx","App.js","index.js"],"names":["APIHandler","axios","create","baseURL","process","withCredentials","AllMovies","movies","copy","sort","Math","random","Container","Row","map","movie","i","Col","className","to","pathname","_id","movieId","src","image","alt","width","height","TopMovies","a","b","imDbRating","localeCompare","Home","state","searchString","handleSearch","text","setState","get","then","data","console","log","length","catch","apiErr","error","moviesToDisplay","this","filter","title","toLowerCase","includes","md","type","placeholder","onChange","e","target","value","Tabs","ActiveKey","transition","id","mountOnEnter","variant","Tab","eventKey","Spinner","animation","size","Component","UserContext","React","createContext","UserContextProvider","props","useState","currentUser","setCurrentUser","isLoading","setIsLoading","useEffect","res","isLoggedIn","Boolean","Provider","children","withAuth","MyComponent","Consumer","context","userContext","useAuth","useContext","Signin","email","setEmail","password","setPassword","handleSubmit","preventDefault","post","apiRes","onSubmit","htmlFor","IconAvatar","clbk","avatar","fileInput","createRef","ref","onClick","current","click","icon","faCog","Signup","tmpAvatar","username","fd","FormData","append","history","push","handleChange","name","handleImage","files","reader","FileReader","onloadend","baseString","result","readAsDataURL","defaultValue","Page404","FormCreateComment","inputText","handleInputText","val","handleAddComment","myComment","comment","rate","id_film","id_author","fetchAllComments","Form","Group","controlId","Control","as","rows","Button","StarRating","film","rating","setRating","hover","setHover","alreadyRated","setAlreadyRated","doc","Array","star","index","onMouseEnter","onMouseLeave","UserStarRatingDisplay","MovieDetail","year","director","duration","plot","actorList","genreList","usersRating","comments","avgRate","fetchAllRatings","handleDelete","delete","match","params","handleEditComment","code","key","patch","directors","runtimeMins","prevProps","prevState","reduce","acc","toFixed","Xmas","Date","getFullYear","genre","actor","contentEditable","onKeyPress","currentTarget","textContent","withRouter","MyAccount","Navi","searchField","stats","Navbar","bg","expand","Nav","App","exact","path","component","NotFound","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.4d83476f.chunk.js","sourcesContent":["import axios from \"axios\";\r\n\r\nconst APIHandler = (() => {\r\n  return axios.create({\r\n    baseURL: process.env.REACT_APP_BACKEND_URL,\r\n    withCredentials: true,\r\n  });\r\n})();\r\n\r\nexport default APIHandler;\r\n","import React from \"react\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport { Row, Container, Col } from \"react-bootstrap\";\r\nimport \"./../styles/AllMovies.css\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default function AllMovies({ movies }) {\r\n  const copy = [...movies]\r\n  copy.sort((() => {return Math.random()-0.5;}))\r\n  return (\r\n    <Container>\r\n      <Row>\r\n        {copy.map((movie, i) => (\r\n          <Col key={i} className=\"movieblock\">\r\n            <Link\r\n              to={{\r\n                pathname: `/movie/${movie._id}`,\r\n                movieId: movie._id,\r\n              }}\r\n            >\r\n              <img\r\n                src={movie.image}\r\n                alt=\"movies\"\r\n                width=\"180px\"\r\n                height=\"270px\"\r\n              />\r\n            </Link>\r\n          </Col>\r\n        ))}\r\n      </Row>\r\n    </Container>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport { Row, Container, Col, Spinner } from \"react-bootstrap\";\r\nimport \"./../styles/AllMovies.css\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\n\r\nexport default function TopMovies({ movies }) {\r\n    const copy = [...movies]\r\n    copy.sort((a, b) => b.imDbRating.localeCompare(a.imDbRating))\r\n        return (\r\n    <Container>\r\n      <Row>\r\n        {copy.map((movie , i) => (\r\n          <Col key={i} className=\"movieblock\">\r\n\r\n            <Link\r\n              to={{\r\n                pathname: `/movie/${movie._id}`,\r\n                movieId: movie._id,\r\n              }}\r\n            >\r\n              <img\r\n                src={movie.image}\r\n                alt=\"movies\"\r\n                width=\"180px\"\r\n                height=\"270px\"\r\n              />\r\n            </Link>\r\n          </Col>\r\n        ))}\r\n      </Row>\r\n    </Container>\r\n  );\r\n}\r\n","import React, { Component } from \"react\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport { Container, Tabs, Tab,Row, Col, Spinner } from \"react-bootstrap\";\r\n// import { Link } from \"react-router-dom\";\r\nimport \"./../styles/home.css\";\r\nimport APIHandler from \"./../api/APIHandler\";\r\nimport AllMovies from \"../components/AllMovies\";\r\nimport TopMovies from \"../components/TopMovies\";\r\n\r\nexport default class Home extends Component {\r\n  state = {\r\n    movies: [],\r\n    searchString: '',\r\n  };\r\n  handleSearch = (text) => {\r\n    this.setState({searchString: text})\r\n  }\r\n  async componentDidMount() {\r\n    APIHandler.get(\"/movies\")\r\n      .then(({ data }) => {\r\n        console.log(\"movies\", data.length);\r\n        this.setState({\r\n          movies: data,\r\n        });\r\n      })\r\n      .catch((apiErr) => console.error(apiErr));\r\n  }\r\n\r\n  render() {\r\n    //Filter here \r\n    let moviesToDisplay = null\r\n\r\n    if (this.state.searchString !== '' && this.state.movies.length > 0) {\r\n      moviesToDisplay = this.state.movies.filter(movie => {\r\n        return movie?.title?.toLowerCase()?.includes(this.state.searchString.toLowerCase())\r\n      })\r\n    } else {\r\n      moviesToDisplay = [...this.state.movies]\r\n    }\r\n      return (\r\n        <div>\r\n        {!this.state.movies.length? (\r\n          <div className=\"jiazai\">\r\n          Waiting  \r\n            <Spinner animation=\"grow\" variant=\"dark\" size=\"sm\"/>\r\n            <Spinner animation=\"grow\" variant=\"dark\" size=\"sm\"/>\r\n            <Spinner animation=\"grow\" variant=\"dark\" size=\"sm\"/>\r\n            <Spinner animation=\"grow\" variant=\"dark\" size=\"sm\"/>\r\n            <Spinner animation=\"grow\" variant=\"dark\" size=\"sm\"/>\r\n          </div>\r\n        ) :(\r\n        <Container>\r\n        <Row>\r\n          <Col md={8}>\r\n          <input type=\"text\" placeholder=\"Search...\" className=\"inpSearch\" onChange={(e) => this.handleSearch(e.target.value)}/> \r\n          </Col>\r\n        </Row>\r\n          <Tabs\r\n            ActiveKey=\"eventKey\"\r\n            transition={true}\r\n            id=\"noanim-tab-example\"\r\n            className=\"mb-3\"\r\n            mountOnEnter=\"true\"\r\n            variant='pills'\r\n          >\r\n            <Tab eventKey=\"home\" title=\"Home\">\r\n              {moviesToDisplay.length && <AllMovies movies={moviesToDisplay} />}\r\n            </Tab>\r\n            <Tab eventKey=\"Top-Movies\" title=\"Top\">\r\n              <TopMovies movies={this.state.movies}/>\r\n            </Tab>\r\n          </Tabs>\r\n          </Container>\r\n        )}\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n","import React, { useContext, useState, useEffect } from \"react\";\r\nimport APIHandler from \"./../api/APIHandler\";\r\n\r\nexport const UserContext = React.createContext();\r\n\r\n/**\r\n *\r\n * @param {Object} props\r\n * @returns a Provider wrappinng the authentication logic\r\n */\r\nexport const UserContextProvider = (props) => {\r\n  const [currentUser, setCurrentUser] = useState(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    APIHandler.get(\"/is-loggedin\")\r\n      .then((res) => {\r\n        setIsLoading(false);\r\n        setCurrentUser(res.data.currentUser);\r\n      })\r\n      .catch(() => {\r\n        setCurrentUser(null);\r\n        setIsLoading(false);\r\n      });\r\n  }, []);\r\n\r\n  const isLoggedIn = Boolean(currentUser); // checked on every render => passed to the\r\n\r\n  return (\r\n    <UserContext.Provider\r\n      value={{ currentUser, isLoading, isLoggedIn, setCurrentUser }}\r\n    >\r\n      {!isLoading ? props.children : null}\r\n    </UserContext.Provider>\r\n  );\r\n};\r\n\r\n/**\r\n * provide the UserContext to class/ based components\r\n * in  classes, the UserContext is bound to this.props.userContext\r\n * @param {React.Component} MyComponent any class based component\r\n * @returns A consumer component accessign the values exposed by the UserContext\r\n */\r\nexport const withAuth = (MyComponent) => {\r\n  return (props) => {\r\n    return (\r\n      <UserContext.Consumer>\r\n        {(context) => {\r\n          return <MyComponent {...props} userContext={context} />;\r\n        }}\r\n      </UserContext.Consumer>\r\n    );\r\n  };\r\n};\r\n\r\n/**\r\n * a utility function (shortcut) so you don't have to import the Context + useContext in you app's functionnal components\r\n * @returns\r\n */\r\nexport const useAuth = () => useContext(UserContext);\r\n","import React, { useState } from \"react\";\r\n\r\nimport { Link, Redirect } from \"react-router-dom\";\r\n// custom tools\r\nimport { useAuth } from \"../auth/UserContext\";\r\nimport APIHandler from \"../api/APIHandler\";\r\nimport \"./../styles/form.css\";\r\nimport { Container } from \"react-bootstrap\";\r\n\r\nexport default function Signin(props) {\r\n  const [email, setEmail] = useState(\"admin@foobarbaz.io\");\r\n  const [password, setPassword] = useState(\"12345\");\r\n  const { isLoggedIn, setCurrentUser } = useAuth();\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const apiRes = await APIHandler.post(\"/signin\", { email, password });\r\n      setCurrentUser(apiRes.data.currentUser);\r\n    } catch (err) {\r\n      setCurrentUser(null);\r\n    }\r\n  };\r\n\r\n  return isLoggedIn ? (\r\n    <Redirect to=\"/dashboard\" />\r\n  ) : (\r\n    <Container>\r\n    <form className=\"form\" onSubmit={handleSubmit}>\r\n      <h1 className=\"title\">Signin</h1>\r\n      <label className=\"label\" htmlFor=\"email\">\r\n        email\r\n      </label>\r\n      <input\r\n        className=\"input\"\r\n        id=\"email\"\r\n        type=\"email\"\r\n        value={email}\r\n        onChange={(e) => setEmail(e.target.value)}\r\n      />\r\n      <label className=\"label\" htmlFor=\"password\">\r\n        password\r\n      </label>\r\n      <input\r\n        className=\"input\"\r\n        id=\"password\"\r\n        type=\"password\"\r\n        value={password}\r\n        onChange={(e) => setPassword(e.target.value)}\r\n      />\r\n      <button className=\"btn\">ok</button>\r\n      <p className=\"parag\">\r\n        No account yet ? please{\" \"}\r\n        <Link to=\"/signup\" className=\"link\">\r\n          signup\r\n        </Link>\r\n      </p>\r\n    </form>\r\n    </Container>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faCog } from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nexport default function IconAvatar({ clbk, avatar= \"\"}) {\r\n  const fileInput = React.createRef();\r\n\r\n  const handleClick = () => {\r\n    fileInput.current.click();\r\n  };\r\n\r\n  return (\r\n    <div className={\"is-clickable icon-avatar\"} title=\"change avatar\">\r\n      {avatar && <img src={avatar} alt=\"user avatar\" />}\r\n      <input\r\n        ref={fileInput}\r\n        type=\"file\"\r\n        className=\"is-hidden\"\r\n        onChange={clbk}\r\n      />\r\n      <FontAwesomeIcon\r\n        onClick={handleClick}\r\n        className=\"is-clickable fa-lg\"\r\n        icon={faCog}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Link, Redirect } from \"react-router-dom\";\r\n// custom tools\r\nimport { Container } from \"react-bootstrap\";\r\nimport APIHandler from \"../api/APIHandler\";\r\nimport IconAvatarAdmin from \"../components/icon/IconAvatarAdmin\";\r\nimport { withAuth } from \"../auth/UserContext\";\r\n// styles\r\nimport \"./../styles/form.css\";\r\nimport \"./../styles/icon-avatar.css\";\r\n\r\nclass Signup extends Component {\r\n  state = {\r\n    avatar: \"\",\r\n    tmpAvatar: \"/imag/Avatar.jpeg\",\r\n    username: \"admin\",\r\n    email: \"admin@foobarbaz.io\",\r\n    password: \"12345\",\r\n  };\r\n\r\n  handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    const fd = new FormData();\r\n    // create a form data (programatic form, to send the file as binary)\r\n    fd.append(\"email\", this.state.email);\r\n    fd.append(\"password\", this.state.password);\r\n    fd.append(\"username\", this.state.username);\r\n    fd.append(\"avatar\", this.state.avatar);\r\n\r\n    try {\r\n      await APIHandler.post(\"/signup\", fd);\r\n      this.props.history.push(\"/signin\");\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  handleChange = (e) => {\r\n    this.setState({ [e.target.name]: e.target.value });\r\n  };\r\n\r\n  handleImage = (e) => {\r\n    // console.log(\"Signup@handle image\", e.target.files[0]);\r\n    this.setState({ avatar: e.target.files[0] }, () => {\r\n      const reader = new FileReader();\r\n      reader.onloadend = () => {\r\n        // when the fileREader ends  ...\r\n        const baseString = reader.result; // get the image as a base64 encoded string\r\n        this.setState({ tmpAvatar: baseString }); // set the tmp avatar as an image source before upload\r\n      };\r\n      reader.readAsDataURL(this.state.avatar); // read the file from the local disk\r\n    });\r\n  };\r\n\r\n  render() {\r\n    // console.log(this.props);\r\n    const { isLoggedIn } = this.props.userContext;\r\n    const { email, password, username, tmpAvatar } = this.state;\r\n    return isLoggedIn ? (\r\n      // avoid the component to be rendered if user is already logged in\r\n      <Redirect to=\"/dashboard\" />\r\n    ) : (\r\n      <Container>\r\n      <form\r\n        className=\"form\"\r\n        onSubmit={this.handleSubmit}\r\n        onChange={this.handleChange}\r\n      >\r\n        <h1 className=\"title\">Signup</h1>\r\n        <label className=\"label\" id=\"avatar\" htmlFor=\"avatar\">\r\n        <IconAvatarAdmin avatar={tmpAvatar} clbk={this.handleImage} />\r\n        </label>\r\n        <label className=\"label\" htmlFor=\"email\">\r\n          Email\r\n        </label>\r\n        <input\r\n          className=\"input\"\r\n          id=\"email\"\r\n          type=\"email\"\r\n          name=\"email\"\r\n          defaultValue={email}\r\n        />\r\n        <label className=\"label\" htmlFor=\"username\">\r\n          Username\r\n        </label>\r\n        <input\r\n          className=\"input\"\r\n          id=\"username\"\r\n          type=\"text\"\r\n          name=\"username\"\r\n          defaultValue={username}\r\n        />\r\n        <label className=\"label\" htmlFor=\"password\">\r\n          Password\r\n        </label>\r\n        <input\r\n          className=\"input\"\r\n          id=\"password\"\r\n          type=\"password\"\r\n          name=\"password\"\r\n          defaultValue={password}\r\n        />\r\n        <button className=\"btn\">OK</button>\r\n        <p className=\"parag\">\r\n          Already a member ? please{\" \"}\r\n          <Link to=\"/signin\" className=\"link\">\r\n            signin\r\n          </Link>\r\n        </p>\r\n      </form>\r\n      </Container>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withAuth(Signup);\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default function Page404() {\r\n  return (\r\n    <div>\r\n      Oh no !!!\r\n      <br />\r\n      You seem lost friend :( <br />\r\n      Go back to the &nbsp;<Link to=\"/\">home page</Link>\r\n    </div>\r\n  );\r\n}\r\n","import React, { Component } from \"react\";\r\nimport APIHandler from \"../../api/APIHandler\";\r\nimport { Form, Button }from \"react-bootstrap\"\r\n// comment recuperer le user connecte dans ce composqnt \r\n// pour envoyer le id_author dans le post /comments ?\r\n\r\nexport default class FormCreateComment extends Component {\r\n  state = {\r\n    inputText: \"\",\r\n  };\r\n\r\n  handleInputText = (val) => {\r\n    this.setState({\r\n      inputText: val.target.value,\r\n    });\r\n  };\r\n\r\n  handleAddComment = (e) => {\r\n    // console.log(\"here\");\r\n    let myComment = {\r\n      comment: this.state.inputText,\r\n      rate: \"3\",\r\n      id_film: this.props.movieId,\r\n      id_author: \"618ffb3532facccdf54b37dc\"\r\n    };\r\n    // console.log(\"be4 post\");\r\n    APIHandler.post(\"/comments\", myComment)\r\n      .then((res) => {\r\n        // console.log(\"after post result\");\r\n        // passer l'info au parent (un comme nt a été ajouté )\r\n        // le parent fetch tousles comments (les anciens + le nouveau) puis setState(comments)\r\n        // du coup re-render et on peut afficher la liste des comments\r\n        console.log(res);\r\n        console.log(this.props);\r\n        this.props.fetchAllComments(this.props.movieId);\r\n      })\r\n      .catch((apiErr) => console.error(apiErr));\r\n    // console.log(\"after post\");\r\n  };\r\n\r\n  render() {\r\n    // function simulateNetworkRequest() {\r\n    //   return new Promise((resolve) => setTimeout(resolve, 2000));\r\n    // }\r\n    \r\n    // function LoadingButton() {\r\n    //   const [isLoading, setLoading] = useState(false);\r\n    \r\n    //   useEffect(() => {\r\n    //     if (isLoading) {\r\n    //       simulateNetworkRequest().then(() => {\r\n    //         setLoading(false);\r\n    //       });\r\n    //     }\r\n    //   }, [isLoading]);\r\n    \r\n    //   const handleClick = () => setLoading(true);\r\n    return (\r\n      <div>\r\n      <Form>\r\n          <Form.Group className=\"mb-3\" controlId=\"exampleForm.ControlTextarea1\">\r\n          <Form.Control as=\"textarea\" placeholder=\"Comment Here...\" rows={2} onChange={(value) => this.handleInputText(value)}/>\r\n          {' '}</Form.Group>\r\n      </Form>\r\n        <Button \r\n        variant=\"primary\"\r\n        // disabled={isLoading}\r\n        // onClick={!isLoading ? handleClick : null}\r\n        onClick={() => this.handleAddComment()} size=\"lg\">\r\n          Send\r\n        </Button>\r\n      </div>\r\n    );\r\n    \r\n  }\r\n}  \r\n","import React, { useState, useEffect } from \"react\";\r\nimport APIHandler from \"../api/APIHandler\";\r\nimport {useAuth} from '../auth/UserContext'\r\nconst StarRating = ({film}) => {\r\n    const [rating, setRating] = useState(0);\r\n    const [hover, setHover] = useState(0);\r\n    const [alreadyRated, setAlreadyRated] = useState(false)\r\n    const {currentUser} = useAuth()\r\n    useEffect(() => {\r\n      if(currentUser) {\r\n        APIHandler.get(`/rates/${currentUser._id}/${film}`)\r\n        .then(() => {\r\n          setAlreadyRated(true)\r\n        })\r\n        .catch(() => {\r\n          setAlreadyRated(false)\r\n        })\r\n      }\r\n    },[])\r\n\r\n  useEffect(() => {\r\n    if (!alreadyRated) {\r\n      APIHandler.post('/rates/'+ film, {rate:rating, id_author: currentUser?._id, id_film: film}).then((doc) => {\r\n       \r\n      }).catch(e => console.error(e))\r\n    }\r\n  },[rating, film, alreadyRated])\r\n\r\n    return (\r\n      <div className=\"star-rating\">\r\n        {[...Array(5)].map((star, index) => {\r\n          index += 1;\r\n          return (\r\n            <button\r\n              type=\"button\"\r\n              key={index}\r\n              className={index <= (hover || rating) ? \"on\" : \"off\"}\r\n              onClick={() => setRating(index)}\r\n              onMouseEnter={() => setHover(index)}\r\n              onMouseLeave={() => setHover(rating)}\r\n            >\r\n              <span className=\"star\">&#9733;</span>\r\n            </button>\r\n\r\n          );\r\n        })}\r\n      </div>\r\n    );\r\n  };\r\n\r\nexport default StarRating\r\n\r\n","import React from \"react\";\r\n\r\nconst UserStarRatingDisplay = ({rating}) => {\r\n\r\n  // ajouter les notes pour chaque film\r\n\r\n  console.log(rating)\r\n    return (\r\n      <div className=\"star-rating\">\r\n      {/* if(!rating) {\r\n        \"No user's rating yet\"\r\n      } */}\r\n        {[...Array(5)].map((star, index) => {\r\n\r\n          return (\r\n            <button\r\n              type=\"button\"\r\n              key={index}\r\n              className={index + 1 <= rating  ? \"on\" : \"off\"}\r\n            >\r\n              <span className=\"star\">&#9733;</span>\r\n            </button>\r\n\r\n          );\r\n        })}\r\n      </div>\r\n    );\r\n  };\r\n\r\nexport default UserStarRatingDisplay\r\n\r\n","import React, { Component } from \"react\";\r\nimport APIHandler from \"./../api/APIHandler\";\r\nimport { Container, Row, Col, Button} from \"react-bootstrap\";\r\nimport \"./../styles/MovieDetail.css\";\r\nimport FormCreateComment from \"../components/form/FormCreateComment\";\r\nimport { Link } from \"react-router-dom\";\r\n// import LikeButton from \"../components/LikeButton\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport StarRating from \"../components/StarRating.jsx\";\r\nimport UserStarRatingDisplay from \"../components/UserStarRatingDisplay\";\r\nimport \"./../styles/stars.css\";\r\nimport { withAuth } from \"./../auth/UserContext.js\";\r\n\r\nclass MovieDetail extends Component {\r\n  state = {\r\n    title: \"\",\r\n    year: \"\",\r\n    image: \"\",\r\n    director: \"\",\r\n    duration: \"\",\r\n    plot: \"\",\r\n    actorList: [\r\n      {\r\n        image: \"\",\r\n        name: \"\",\r\n      },\r\n    ],\r\n    genreList: [\r\n      {\r\n        value: \"\",\r\n      },\r\n    ],\r\n    imDbRating: \"\",\r\n    usersRating: [],\r\n    comments: [],\r\n    avgRate: null\r\n  };\r\n\r\n  async componentDidMount() {\r\n    // console.log(\"MovieDetqils componentDidMount\");\r\n    // console.log(\"====================================\");\r\n    // console.log(this.props.currentUser);\r\n    // console.log(\"====================================\");\r\n    //   console.log(this.props.location.movieId)\r\n    //this.props are properties you give to an object when you create so you can access/use them\r\n    //for ex Link with a props \"to=\" create a new object (movie detail) and provide its properties\r\n    APIHandler.get(`/movie/${this.props.match.params.id}`)\r\n      .then(({ data }) => {\r\n        this.setState(\r\n          {\r\n            title: data.title,\r\n            year: data.year,\r\n            director: data.directors,\r\n            duration: data.runtimeMins,\r\n            plot: data.plot,\r\n            image: data.image,\r\n            actorList: data.actorList,\r\n            genreList: data.genreList,\r\n            imDbRating: data.imDbRating,\r\n            // usersRating: data.usersRating,\r\n          },\r\n          () => {\r\n            this.fetchAllComments(this.props.match.params.id);\r\n          }\r\n        );\r\n      })\r\n      .catch((apiErr) => console.error(apiErr));\r\n    this.fetchAllRatings(this.props.match.params.id);\r\n  }\r\n  // aussi fetch tous les comments de ce films et setState comments\r\n  componentDidUpdate(prevProps, prevState) {\r\n    // let tmp\r\n    // if (prevProps === this.state) {\r\n    //   let avgRate = 0\r\n    //   if (this.state.usersRating.length > 0) {\r\n    //    tmp = (\r\n    //       this.state.usersRating.reduce((acc, val) => acc + val.rate, 0) /\r\n    //       this.state.usersRating.length\r\n    //     ).toFixed(2);\r\n    //   }\r\n      \r\n    // }\r\n    // this.setState({\r\n    //   avgRate: tmp,\r\n    // })\r\n  }\r\n  fetchAllComments = async (id) => {\r\n    // console.log(\"fetchAllComments\");\r\n    // console.log(id);\r\n\r\n    // req ajax ici\r\n    try {\r\n      const res = await APIHandler.get(\"/comments/\" + id);\r\n      // console.log(\"fetched all comments for ID\", id, res.data);\r\n      this.setState({\r\n        comments: res.data,\r\n      });\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  fetchAllRatings = async (id) => {\r\n    try {\r\n      const res = await APIHandler.get(\"/rates/\" + id);\r\n      this.setState({\r\n        usersRating: res.data,\r\n      });\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  handleDelete = async (id) => {\r\n    try {\r\n      await APIHandler.delete(`/comments/${id}`);\r\n      this.fetchAllComments(this.props.match.params.id);\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  handleEditComment = async (e, id, text) => {\r\n    console.log(e.code);\r\n    if (e.key === \"Enter\") {\r\n      try {\r\n        await APIHandler.patch(`/comments/${id}`, { comment: text });\r\n        this.fetchAllComments(this.props.match.params.id);\r\n      } catch (err) {\r\n        console.error(err);\r\n      }\r\n    }\r\n  };\r\n\r\n  render() {\r\n    // console.log(this.props)\r\n    // console.log(\"render()\");\r\n    // console.log(this.state.usersRating);\r\n    let avgRate = 0;\r\n    if (this.state.usersRating.length > 0) {\r\n      avgRate = (\r\n        this.state.usersRating.reduce((acc, val) => acc + val.rate, 0) /\r\n        this.state.usersRating.length\r\n        ).toFixed(2);\r\n      }\r\n      const Xmas = new Date(this.state.year);\r\n      console.log(Xmas);\r\n      const year = Xmas.getFullYear(); // returns -100\r\n    return (\r\n      <Container>\r\n        <br />\r\n        <h1>{this.state.title}  <span className=\"year\">({year})</span></h1>\r\n        <br />\r\n        <Row className=\"bodydetail\">\r\n          <Col md=\"auto\" className=\"colImag\">\r\n            <img src={this.state.image} alt=\"one-movie\" width=\"200px\" />\r\n          </Col>\r\n\r\n          <Col md={5} className=\"infoText\">\r\n            <span>Director: {this.state.director}</span>\r\n            <br />\r\n            <span>Duration: {this.state.duration}min</span>\r\n            <br />\r\n            {/* <span className=\"AGlist\">\r\n              Actors:{\" \"}\r\n              {this.state.actorList.map((actor, i) => (\r\n                <h6 key={i}>{actor.name} /</h6>\r\n              ))}\r\n            </span>\r\n            <br /> */}\r\n            <span>IMDB rating : {this.state.imDbRating}</span>\r\n            <br />\r\n            <span className=\"AGlist\">\r\n              Genre :{\" \"}\r\n              {this.state.genreList.map((genre, i) => (\r\n                <h6 key={i}>{genre.value} /</h6>\r\n              ))}\r\n            </span>\r\n            <br />\r\n            <p>{this.state.avgRate}</p>\r\n            <span className=\"rating\">\r\n              User's rating : <UserStarRatingDisplay rating={this.state.avgRate} />\r\n            </span>\r\n          </Col>\r\n          <Row>\r\n            <Col md={10}>\r\n              <span>\r\n                {this.state.actorList.map((actor, i) => (\r\n                  <Link to=\"/actor/:id\" className=\"actorblok\" key={i}>\r\n                    <img\r\n                      className=\"actorimgs\"\r\n                      src={actor.image}\r\n                      alt={actor.name}\r\n                    />\r\n                    {actor.name}\r\n                  </Link>\r\n                ))}\r\n              </span>\r\n            </Col>\r\n          </Row>\r\n        </Row>\r\n        <Col md={8} className=\"plot\">\r\n          <h5>{this.state.title}</h5>\r\n          <h6>{this.state.plot}</h6>\r\n        </Col>\r\n        {/* <Row>\r\n          <StarRating film={this.props.match.params.id} />\r\n          <FormCreateComment\r\n            fetchAllComments={this.fetchAllComments}\r\n            movieId={this.props.match.params.id}\r\n          />\r\n        </Row> */}\r\n        {this.state.comments.map((comment, i) => {\r\n          return (\r\n            <>\r\n              <div\r\n                contentEditable= {\r\n                this.props.currentUser?._id === comment.id_author || true\r\n                }\r\n                key={i}\r\n                className=\"2\"\r\n                onKeyPress={(e) =>\r\n                  this.handleEditComment(\r\n                    e,\r\n                    comment._id,\r\n                    e.currentTarget.textContent\r\n                  )\r\n                }\r\n              >\r\n                {comment.comment}\r\n              </div>\r\n              <Button onClick={() => this.handleDelete(comment._id)} variant=\"warning\">\r\n                Delete\r\n              </Button>\r\n            </>\r\n          );\r\n        })}\r\n        <Row>\r\n          <Col md={6}>\r\n          <StarRating film={this.props.match.params.id} />\r\n          <FormCreateComment\r\n            fetchAllComments={this.fetchAllComments}\r\n            movieId={this.props.match.params.id}\r\n          />\r\n          </Col>\r\n        </Row>\r\n      </Container>\r\n    );\r\n  }\r\n}\r\nexport default withRouter(withAuth(MovieDetail));\r\n","import React, { Component } from \"react\";\r\n// // import APIHandler from \"./../api/APIHandler\";\r\n// // import { withAuth } from \"./../auth/UserContext.js\";\r\n// import { Link, Redirect } from \"react-router-dom\";\r\n// // custom tools\r\nimport { Container } from \"react-bootstrap\";\r\n// import APIHandler from \"../api/APIHandler\";\r\nimport IconAvatarAdmin from \"../components/icon/IconAvatarAdmin\";\r\nimport { withAuth } from \"../auth/UserContext\";\r\n// // styles\r\n// import \"./../styles/form.css\";\r\n// import \"./../styles/icon-avatar.css\";\r\n\r\nclass MyAccount extends Component {\r\n  state = {\r\n    avatar: \"\",\r\n    tmpAvatar: \"/imag/Avatar.jpeg\",\r\n    username: \"admin\",\r\n    email: \"admin@foobarbaz.io\",\r\n    password: \"12345\",\r\n  };\r\n   \r\n\r\n\r\n  render() {\r\n    const { email, password, username, tmpAvatar } = this.state;\r\n\r\n    return (\r\n    \r\n    <Container>\r\n       <h1 className=\"title\">My Account</h1>\r\n\r\n        <label className=\"label\" id=\"avatar\" htmlFor=\"avatar\">\r\n         <IconAvatarAdmin avatar={this.state.tmpAvatar} />\r\n        </label>\r\n\r\n        <p className=\"label\" htmlFor=\"email\">\r\n           {this.state.email} \r\n        </p>\r\n     \r\n        <p className=\"label\" htmlFor=\"username\">\r\n          {this.state.username}\r\n        </p>\r\n        \r\n\r\n    </Container>\r\n   );\r\n  }\r\n}\r\n\r\nexport default withAuth(MyAccount) // HOC => encapsule ta classe et lui donne en props les infos de l'auth\r\n\r\n// //on veut display seulement les films que le user a commenté/raté\r\n","import React, { Component } from \"react\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport { Link } from \"react-router-dom\";\r\nimport \"./../styles/nav.css\";\r\nimport { Container, Navbar, Nav } from \"react-bootstrap\";\r\nimport { withAuth } from \"../auth/UserContext\";\r\nimport IconAvatarAdmin from \"../components/icon/IconAvatarAdmin\";\r\n\r\nclass Navi extends Component {\r\n  state = {\r\n    searchField: \"\",\r\n    movies: [],\r\n    stats: [],\r\n    tmpAvatar:\"/imag/Avatar.jpeg\"\r\n  }\r\n  \r\n  render() {\r\n    console.log(withAuth.tmpAvatar);\r\n    const { currentUser } = withAuth();\r\n\r\n    return (\r\n      <Navbar bg=\"dark\" expand=\"sm\">\r\n        <Container>\r\n            <Link to=\"/\">\r\n              <img\r\n                src=\"/imag/movie logo.png\"\r\n                alt=\"movielogo\"\r\n                className=\"movielogo\"\r\n              />\r\n            </Link>\r\n            \r\n            <span className=\"ourname\">CINEHOME</span>\r\n\r\n          <Nav className=\"text-center mt-4 mb-4\">\r\n          {!this.props.userContext?.isLoggedIn ? \r\n          (<Link to=\"/signin\" className=\"Signin\">Signin</Link>) \r\n          : (<Link to=\"/dashboard\" className=\"myaccount\">\r\n            <Link to=\"/signout\" className=\"signout\">Signout</Link> \r\n            <IconAvatarAdmin avatar = {this.state.tmpAvatar} />\r\n            </Link>)}\r\n          </Nav>\r\n\r\n        </Container>\r\n      </Navbar>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withAuth(Navi)","import React from \"react\";\r\nimport { Route, Switch } from \"react-router-dom\";\r\n// pages components\r\nimport Home from \"./views/Home\";\r\n// import Dashboard from \"./views/Dashboard\";\r\nimport Signin from \"./views/Signin\";\r\nimport Signup from \"./views/Signup\";\r\nimport NotFound from \"./views/NotFound\";\r\nimport MovieDetail from \"./views/MovieDetail\";\r\nimport MyAccount from \"./views/MyAccount\";\r\n\r\n\r\n// partials\r\nimport NavMain from \"./components/Nav\";\r\n// auth\r\nimport { UserContextProvider } from \"./auth/UserContext\";\r\n// import { ProtectedRoute } from \"./auth/ProtectedRoute\";\r\n// styles\r\n// import \"./styles/nav.css\";\r\n\r\nexport default function App() {\r\n\r\n\r\n  \r\n\r\n  return (\r\n    <UserContextProvider>\r\n      <>\r\n        <header>\r\n          <NavMain />\r\n        </header>\r\n        <main id=\"content_main\">\r\n         <Switch>\r\n            <Route exact path=\"/\" component={Home} />\r\n            <Route path=\"/signin\" component={Signin} />\r\n            <Route path=\"/signup\" component={Signup} />\r\n            <Route path=\"/movie/:id\" component={MovieDetail} />\r\n            {/* check the protected route in src/auth folder */}\r\n            <Route path=\"/dashboard\" component={MyAccount} />\r\n            {/* <Route path=\"/comment\" component={Comment} /> */}\r\n            <Route path=\"*\" component={NotFound} />\r\n            <Route path=\"/signout\" component={Home} />\r\n          </Switch> \r\n        </main>\r\n        <footer>&copy;Priscilla | Joey | Yuki</footer>\r\n      </>\r\n    </UserContextProvider>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n// import './index.css';\r\nimport App from './App';\r\nimport { BrowserRouter } from \"react-router-dom\";\r\n// import reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n  <BrowserRouter>\r\n    <App />\r\n  </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\n// reportWebVitals();\r\n"],"sourceRoot":""}