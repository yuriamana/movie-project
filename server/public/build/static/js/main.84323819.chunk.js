(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{122:function(e,t,a){},123:function(e,t,a){},124:function(e,t,a){},125:function(e,t,a){},126:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(31),c=a.n(s),i=a(10),o=a(26),l=a(12),u=a.n(l),j=a(29),m=a(15),h=a(16),b=a(19),d=a(18),p=(a(47),a(131)),O=a(129),v=a(130),x=a(83),f=a(135),g=a(136),y=(a(95),a(82)),N=a.n(y).a.create({baseURL:"https://cine-home.herokuapp.com",withCredentials:!0}),w=(a(78),a(11)),k=a(1);function C(e){var t=e.movies,a=Object(o.a)(t);return a.sort((function(){return Math.random()-.5})),Object(k.jsx)(O.a,{children:Object(k.jsx)(v.a,{children:a.map((function(e,t){return Object(k.jsx)(x.a,{className:"movieblock",children:Object(k.jsx)(w.b,{to:{pathname:"/movie/".concat(e._id),movieId:e._id},children:Object(k.jsx)("img",{src:e.image,alt:"movies",width:"180px",height:"270px"})})},t)}))})})}function A(e){var t=e.movies,a=Object(o.a)(t);return a.sort((function(e,t){return t.imDbRating.localeCompare(e.imDbRating)})),Object(k.jsx)(O.a,{children:Object(k.jsx)(v.a,{children:a.map((function(e,t){return Object(k.jsx)(x.a,{className:"movieblock",children:Object(k.jsx)(w.b,{to:{pathname:"/movie/".concat(e._id),movieId:e._id},children:Object(k.jsx)("img",{src:e.image,alt:"movies",width:"180px",height:"270px"})})},t)}))})})}var S=function(e){Object(b.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={movies:[],searchString:""},e.handleSearch=function(t){e.setState({searchString:t})},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=Object(j.a)(u.a.mark((function e(){var t=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N.get("/movies").then((function(e){var a=e.data;console.log("movies",a.length),t.setState({movies:a})})).catch((function(e){return console.error(e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=null;return t=""!==this.state.searchString&&this.state.movies.length>0?this.state.movies.filter((function(t){var a,n;return null===t||void 0===t||null===(a=t.title)||void 0===a||null===(n=a.toLowerCase())||void 0===n?void 0:n.includes(e.state.searchString.toLowerCase())})):Object(o.a)(this.state.movies),Object(k.jsx)("div",{children:this.state.movies.length?Object(k.jsxs)(O.a,{children:[Object(k.jsx)(v.a,{children:Object(k.jsx)(x.a,{md:8,children:Object(k.jsx)("input",{type:"text",placeholder:"Search...",className:"inpSearch",onChange:function(t){return e.handleSearch(t.target.value)}})})}),Object(k.jsxs)(f.a,{ActiveKey:"eventKey",transition:!0,id:"noanim-tab-example",className:"mb-3",mountOnEnter:"true",variant:"pills",children:[Object(k.jsx)(g.a,{eventKey:"home",title:"All ",children:t.length&&Object(k.jsx)(C,{movies:t})}),Object(k.jsx)(g.a,{eventKey:"Top-Movies",title:"Top",children:Object(k.jsx)(A,{movies:this.state.movies})})]})]}):Object(k.jsxs)("div",{className:"jiazai",children:["Waiting",Object(k.jsx)(p.a,{animation:"grow",variant:"dark",size:"sm"}),Object(k.jsx)(p.a,{animation:"grow",variant:"dark",size:"sm"}),Object(k.jsx)(p.a,{animation:"grow",variant:"dark",size:"sm"}),Object(k.jsx)(p.a,{animation:"grow",variant:"dark",size:"sm"}),Object(k.jsx)(p.a,{animation:"grow",variant:"dark",size:"sm"})]})})}}]),a}(n.Component),D=a(7),R=a(2),I=r.a.createContext(),L=function(e){var t=Object(n.useState)(null),a=Object(D.a)(t,2),r=a[0],s=a[1],c=Object(n.useState)(!0),i=Object(D.a)(c,2),o=i[0],l=i[1];Object(n.useEffect)((function(){N.get("/is-loggedin").then((function(e){l(!1),s(e.data.currentUser)})).catch((function(){s(null),l(!1)}))}),[]);var u=Boolean(r);return Object(k.jsx)(I.Provider,{value:{currentUser:r,isLoading:o,isLoggedIn:u,setCurrentUser:s},children:o?null:e.children})},F=function(e){return function(t){return Object(k.jsx)(I.Consumer,{children:function(a){return Object(k.jsx)(e,Object(R.a)(Object(R.a)({},t),{},{userContext:a}))}})}},_=function(){return Object(n.useContext)(I)};a(80);function E(e){var t=Object(n.useState)("admin@foobarbaz.io"),a=Object(D.a)(t,2),r=a[0],s=a[1],c=Object(n.useState)("12345"),o=Object(D.a)(c,2),l=o[0],m=o[1],h=_(),b=h.isLoggedIn,d=h.setCurrentUser,p=function(){var e=Object(j.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,N.post("/signin",{email:r,password:l});case 4:a=e.sent,d(a.data.currentUser),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),d(null);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return b?Object(k.jsx)(i.a,{to:"/dashboard"}):Object(k.jsx)(O.a,{children:Object(k.jsxs)("form",{className:"form",onSubmit:p,children:[Object(k.jsx)("h1",{className:"title",children:"Signin"}),Object(k.jsx)("label",{className:"label",htmlFor:"email",children:"email"}),Object(k.jsx)("input",{className:"input",id:"email",type:"email",value:r,onChange:function(e){return s(e.target.value)}}),Object(k.jsx)("label",{className:"label",htmlFor:"password",children:"password"}),Object(k.jsx)("input",{className:"input",id:"password",type:"password",value:l,onChange:function(e){return m(e.target.value)}}),Object(k.jsx)("button",{className:"btn",children:"ok"}),Object(k.jsxs)("p",{className:"parag",children:["No account yet ? please"," ",Object(k.jsx)(w.b,{to:"/signup",className:"link",children:"signup"})]})]})})}var U=a(8),M=a(87),z=a(88);function T(e){var t=e.clbk,a=e.avatar,n=void 0===a?"":a,s=r.a.createRef();return Object(k.jsxs)("div",{className:"is-clickable icon-avatar",title:"change avatar",children:[n&&Object(k.jsx)("img",{src:n,alt:"user avatar"}),Object(k.jsx)("input",{ref:s,type:"file",className:"is-hidden",onChange:t}),Object(k.jsx)(M.a,{onClick:function(){s.current.click()},className:"is-clickable fa-lg",icon:z.a})]})}a(122);var K=function(e){Object(b.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={avatar:"",tmpAvatar:"/imag/Avatar.jpeg",username:"admin",email:"admin@foobarbaz.io",password:"12345"},e.handleSubmit=function(){var t=Object(j.a)(u.a.mark((function t(a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),(n=new FormData).append("email",e.state.email),n.append("password",e.state.password),n.append("username",e.state.username),n.append("avatar",e.state.avatar),t.prev=6,t.next=9,N.post("/signup",n);case 9:e.props.history.push("/signin"),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(6),console.error(t.t0);case 15:case"end":return t.stop()}}),t,null,[[6,12]])})));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(t){e.setState(Object(U.a)({},t.target.name,t.target.value))},e.handleImage=function(t){e.setState({avatar:t.target.files[0]},(function(){var t=new FileReader;t.onloadend=function(){var a=t.result;e.setState({tmpAvatar:a})},t.readAsDataURL(e.state.avatar)}))},e}return Object(h.a)(a,[{key:"render",value:function(){var e=this.props.userContext.isLoggedIn,t=this.state,a=t.email,n=t.password,r=t.username,s=t.tmpAvatar;return e?Object(k.jsx)(i.a,{to:"/dashboard"}):Object(k.jsx)(O.a,{children:Object(k.jsxs)("form",{className:"form",onSubmit:this.handleSubmit,onChange:this.handleChange,children:[Object(k.jsx)("h1",{className:"title",children:"Signup"}),Object(k.jsx)("label",{className:"label",id:"avatar",htmlFor:"avatar",children:Object(k.jsx)(T,{avatar:s,clbk:this.handleImage})}),Object(k.jsx)("label",{className:"label",htmlFor:"email",children:"Email"}),Object(k.jsx)("input",{className:"input",id:"email",type:"email",name:"email",defaultValue:a}),Object(k.jsx)("label",{className:"label",htmlFor:"username",children:"Username"}),Object(k.jsx)("input",{className:"input",id:"username",type:"text",name:"username",defaultValue:r}),Object(k.jsx)("label",{className:"label",htmlFor:"password",children:"Password"}),Object(k.jsx)("input",{className:"input",id:"password",type:"password",name:"password",defaultValue:n}),Object(k.jsx)("button",{className:"btn",children:"OK"}),Object(k.jsxs)("p",{className:"parag",children:["Already a member ? please"," ",Object(k.jsx)(w.b,{to:"/signin",className:"link",children:"signin"})]})]})})}}]),a}(n.Component),G=F(K);function P(){return Object(k.jsxs)("div",{children:["Oh no !!!",Object(k.jsx)("br",{}),"You seem lost friend :( ",Object(k.jsx)("br",{}),"Go back to the \xa0",Object(k.jsx)(w.b,{to:"/",children:"home page"})]})}var B=a(132),J=(a(123),a(134)),V=function(e){Object(b.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={inputText:""},e.handleInputText=function(t){e.setState({inputText:t.target.value})},e.handleAddComment=function(t){var a={comment:e.state.inputText,rate:"3",id_film:e.props.movieId,id_author:"618ffb3532facccdf54b37dc"};N.post("/comments",a).then((function(t){console.log(t),console.log(e.props),e.props.fetchAllComments(e.props.movieId)})).catch((function(e){return console.error(e)}))},e}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return Object(k.jsxs)("div",{children:[Object(k.jsx)(J.a,{children:Object(k.jsxs)(J.a.Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea1",children:[Object(k.jsx)(J.a.Control,{as:"textarea",placeholder:"Comment Here...",rows:2,onChange:function(t){return e.handleInputText(t)}})," "]})}),Object(k.jsx)(B.a,{variant:"primary",onClick:function(){return e.handleAddComment()},size:"lg",children:"Send"})]})}}]),a}(n.Component),Y=function(e){var t=e.film,a=Object(n.useState)(0),r=Object(D.a)(a,2),s=r[0],c=r[1],i=Object(n.useState)(0),l=Object(D.a)(i,2),u=l[0],j=l[1],m=Object(n.useState)(!1),h=Object(D.a)(m,2),b=h[0],d=h[1],p=_().currentUser;return Object(n.useEffect)((function(){p&&N.get("/rates/".concat(p._id,"/").concat(t)).then((function(){d(!0)})).catch((function(){d(!1)}))}),[]),Object(n.useEffect)((function(){b||N.post("/rates/"+t,{rate:s,id_author:null===p||void 0===p?void 0:p._id,id_film:t}).then((function(e){})).catch((function(e){return console.error(e)}))}),[s,t,b]),Object(k.jsx)("div",{className:"star-rating",children:Object(o.a)(Array(5)).map((function(e,t){return t+=1,Object(k.jsx)("button",{type:"button",className:t<=(u||s)?"on":"off",onClick:function(){return c(t)},onMouseEnter:function(){return j(t)},onMouseLeave:function(){return j(s)},children:Object(k.jsx)("span",{className:"star",children:"\u2605"})},t)}))})},H=function(e){var t=e.rating;return console.log(t),Object(k.jsx)("div",{className:"star-rating",children:Object(o.a)(Array(5)).map((function(e,a){return Object(k.jsx)("button",{type:"button",className:a+1<=t?"on":"off",children:Object(k.jsx)("span",{className:"star",children:"\u2605"})},a)}))})},W=(a(124),function(e){Object(b.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={title:"",year:"",image:"",director:"",duration:"",plot:"",actorList:[{image:"",name:""}],genreList:[{value:""}],imDbRating:"",usersRating:[],comments:[],avgRate:null},e.fetchAllComments=function(){var t=Object(j.a)(u.a.mark((function t(a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,N.get("/comments/"+a);case 3:n=t.sent,e.setState({comments:n.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),e.fetchAllRatings=function(){var t=Object(j.a)(u.a.mark((function t(a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,N.get("/rates/"+a);case 3:n=t.sent,e.setState({usersRating:n.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),e.handleDelete=function(){var t=Object(j.a)(u.a.mark((function t(a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,N.delete("/comments/".concat(a));case 3:e.fetchAllComments(e.props.match.params.id),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.error(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),e.handleEditComment=function(){var t=Object(j.a)(u.a.mark((function t(a,n,r){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(a.code),"Enter"!==a.key){t.next=11;break}return t.prev=2,t.next=5,N.patch("/comments/".concat(n),{comment:r});case 5:e.fetchAllComments(e.props.match.params.id),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e,a,n){return t.apply(this,arguments)}}(),e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=Object(j.a)(u.a.mark((function e(){var t=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N.get("/movie/".concat(this.props.match.params.id)).then((function(e){var a=e.data;t.setState({title:a.title,year:a.year,director:a.directors,duration:a.runtimeMins,plot:a.plot,image:a.image,actorList:a.actorList,genreList:a.genreList,imDbRating:a.imDbRating},(function(){t.fetchAllComments(t.props.match.params.id)}))})).catch((function(e){return console.error(e)})),this.fetchAllRatings(this.props.match.params.id);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e,t){}},{key:"render",value:function(){var e=this;this.state.usersRating.length>0&&(this.state.usersRating.reduce((function(e,t){return e+t.rate}),0)/this.state.usersRating.length).toFixed(2);var t=new Date(this.state.year);console.log(t);var a=t.getFullYear();return Object(k.jsxs)(O.a,{children:[Object(k.jsx)("br",{}),Object(k.jsxs)("h1",{children:[this.state.title,"  ",Object(k.jsxs)("span",{className:"year",children:["(",a,")"]})]}),Object(k.jsx)("br",{}),Object(k.jsxs)(v.a,{className:"bodydetail",children:[Object(k.jsx)(x.a,{md:"auto",className:"colImag",children:Object(k.jsx)("img",{src:this.state.image,alt:"one-movie",width:"200px"})}),Object(k.jsxs)(x.a,{md:5,className:"infoText",children:[Object(k.jsxs)("span",{children:["Director: ",this.state.director]}),Object(k.jsx)("br",{}),Object(k.jsxs)("span",{children:["Duration: ",this.state.duration,"min"]}),Object(k.jsx)("br",{}),Object(k.jsxs)("span",{children:["IMDB rating : ",this.state.imDbRating]}),Object(k.jsx)("br",{}),Object(k.jsxs)("span",{className:"AGlist",children:["Genre :"," ",this.state.genreList.map((function(e,t){return Object(k.jsxs)("h6",{children:[e.value," /"]},t)}))]}),Object(k.jsx)("br",{}),Object(k.jsx)("p",{children:this.state.avgRate}),Object(k.jsxs)("span",{className:"rating",children:["User's rating : ",Object(k.jsx)(H,{rating:this.state.avgRate})]})]}),Object(k.jsx)(v.a,{children:Object(k.jsx)(x.a,{md:10,children:Object(k.jsx)("span",{children:this.state.actorList.map((function(e,t){return Object(k.jsxs)(w.b,{to:"/actor/:id",className:"actorblok",children:[Object(k.jsx)("img",{className:"actorimgs",src:e.image,alt:e.name}),e.name]},t)}))})})})]}),Object(k.jsxs)(x.a,{md:8,className:"plot",children:[Object(k.jsx)("h5",{children:this.state.title}),Object(k.jsx)("h6",{children:this.state.plot})]}),this.state.comments.map((function(t,a){var n;return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("div",{contentEditable:(null===(n=e.props.currentUser)||void 0===n?void 0:n._id)===t.id_author||!0,className:"2",onKeyPress:function(a){return e.handleEditComment(a,t._id,a.currentTarget.textContent)},children:t.comment},a),Object(k.jsx)(B.a,{onClick:function(){return e.handleDelete(t._id)},variant:"warning",children:"Delete"})]})})),Object(k.jsx)(v.a,{children:Object(k.jsxs)(x.a,{md:6,children:[Object(k.jsx)(Y,{film:this.props.match.params.id}),Object(k.jsx)(V,{fetchAllComments:this.fetchAllComments,movieId:this.props.match.params.id})]})})]})}}]),a}(n.Component)),q=Object(i.g)(F(W)),Q=function(e){Object(b.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={avatar:"",tmpAvatar:"/imag/Avatar.jpeg",username:"admin",email:"admin@foobarbaz.io",password:"12345"},e}return Object(h.a)(a,[{key:"render",value:function(){var e=this.state;e.email,e.password,e.username,e.tmpAvatar;return Object(k.jsxs)(O.a,{children:[Object(k.jsx)("h1",{className:"title",children:"My Account"}),Object(k.jsx)("label",{className:"label",id:"avatar",htmlFor:"avatar",children:Object(k.jsx)(T,{avatar:this.state.tmpAvatar})}),Object(k.jsx)("p",{className:"label",htmlFor:"email",children:this.state.email}),Object(k.jsx)("p",{className:"label",htmlFor:"username",children:this.state.username})]})}}]),a}(n.Component),X=F(Q),Z=(a(125),a(133)),$=a(89),ee=function(e){Object(b.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={searchField:"",movies:[],stats:[],tmpAvatar:"/imag/Avatar.jpeg"},e}return Object(h.a)(a,[{key:"render",value:function(){var e;console.log(F.tmpAvatar);F().currentUser;return Object(k.jsx)(Z.a,{bg:"dark",expand:"sm",children:Object(k.jsxs)(O.a,{children:[Object(k.jsx)(w.b,{to:"/",children:Object(k.jsx)("img",{src:"/imag/movie logo.png",alt:"movielogo",className:"movielogo"})}),Object(k.jsx)("span",{className:"ourname",children:"CINEHOME"}),Object(k.jsx)($.a,{className:"text-center mt-4 mb-4",children:(null===(e=this.props.userContext)||void 0===e?void 0:e.isLoggedIn)?Object(k.jsxs)(w.b,{to:"/dashboard",className:"myaccount",children:[Object(k.jsx)(w.b,{to:"/signout",className:"signout",children:"Signout"}),Object(k.jsx)(T,{avatar:this.state.tmpAvatar})]}):Object(k.jsx)(w.b,{to:"/signin",className:"Signin",children:"Signin"})})]})})}}]),a}(n.Component),te=F(ee);function ae(){return Object(k.jsx)(L,{children:Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("header",{children:Object(k.jsx)(te,{})}),Object(k.jsx)("main",{id:"content_main",children:Object(k.jsxs)(i.d,{children:[Object(k.jsx)(i.b,{exact:!0,path:"/",component:S}),Object(k.jsx)(i.b,{path:"/signin",component:E}),Object(k.jsx)(i.b,{path:"/signup",component:G}),Object(k.jsx)(i.b,{path:"/movie/:id",component:q}),Object(k.jsx)(i.b,{path:"/dashboard",component:X}),Object(k.jsx)(i.b,{path:"*",component:P}),Object(k.jsx)(i.b,{path:"/signout",component:S})]})}),Object(k.jsx)("footer",{children:"\xa9Priscilla | Joey | Yuki"})]})})}c.a.render(Object(k.jsx)(r.a.StrictMode,{children:Object(k.jsx)(w.a,{children:Object(k.jsx)(ae,{})})}),document.getElementById("root"))},78:function(e,t,a){},80:function(e,t,a){},95:function(e,t,a){}},[[126,1,2]]]);
//# sourceMappingURL=main.84323819.chunk.js.map