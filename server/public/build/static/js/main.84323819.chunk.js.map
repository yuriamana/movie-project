{"version":3,"sources":["api/APIHandler.jsx","components/AllMovies.jsx","components/TopMovies.jsx","views/Home.jsx","auth/UserContext.js","views/Signin.jsx","components/icon/IconAvatarAdmin.jsx","views/Signup.jsx","views/NotFound.jsx","components/form/FormCreateComment.jsx","components/StarRating.jsx","components/UserStarRatingDisplay.jsx","views/MovieDetail.jsx","views/MyAccount.jsx","components/Nav.jsx","App.js","index.js"],"names":["APIHandler","axios","create","baseURL","process","withCredentials","AllMovies","movies","copy","sort","Math","random","Container","Row","map","movie","i","Col","className","to","pathname","_id","movieId","src","image","alt","width","height","TopMovies","a","b","imDbRating","localeCompare","Home","state","searchString","handleSearch","text","setState","get","then","data","console","log","length","catch","apiErr","error","moviesToDisplay","this","filter","title","toLowerCase","includes","md","type","placeholder","onChange","e","target","value","Tabs","ActiveKey","transition","id","mountOnEnter","variant","Tab","eventKey","Spinner","animation","size","Component","UserContext","React","createContext","UserContextProvider","props","useState","currentUser","setCurrentUser","isLoading","setIsLoading","useEffect","res","isLoggedIn","Boolean","Provider","children","withAuth","MyComponent","Consumer","context","userContext","useAuth","useContext","Signin","email","setEmail","password","setPassword","handleSubmit","preventDefault","post","apiRes","onSubmit","htmlFor","IconAvatar","clbk","avatar","fileInput","createRef","ref","onClick","current","click","icon","faCog","Signup","tmpAvatar","username","fd","FormData","append","history","push","handleChange","name","handleImage","files","reader","FileReader","onloadend","baseString","result","readAsDataURL","defaultValue","Page404","FormCreateComment","inputText","handleInputText","val","handleAddComment","myComment","comment","rate","id_film","id_author","fetchAllComments","Form","Group","controlId","Control","as","rows","Button","StarRating","film","rating","setRating","hover","setHover","alreadyRated","setAlreadyRated","doc","Array","star","index","onMouseEnter","onMouseLeave","UserStarRatingDisplay","MovieDetail","year","director","duration","plot","actorList","genreList","usersRating","comments","avgRate","fetchAllRatings","handleDelete","delete","match","params","handleEditComment","code","key","patch","directors","runtimeMins","prevProps","prevState","reduce","acc","toFixed","Xmas","Date","getFullYear","genre","actor","contentEditable","onKeyPress","currentTarget","textContent","withRouter","MyAccount","Navi","searchField","stats","Navbar","bg","expand","Nav","App","exact","path","component","NotFound","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.84323819.chunk.js","sourcesContent":["import axios from \"axios\";\n\nconst APIHandler = (() => {\n  return axios.create({\n    baseURL: process.env.REACT_APP_BACKEND_URL,\n    withCredentials: true,\n  });\n})();\n\nexport default APIHandler;\n","import React from \"react\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport { Row, Container, Col } from \"react-bootstrap\";\nimport \"./../styles/AllMovies.css\";\nimport { Link } from \"react-router-dom\";\n\nexport default function AllMovies({ movies }) {\n  const copy = [...movies]\n  copy.sort((() => {return Math.random()-0.5;}))\n  return (\n    <Container>\n      <Row>\n        {copy.map((movie, i) => (\n          <Col key={i} className=\"movieblock\">\n            <Link\n              to={{\n                pathname: `/movie/${movie._id}`,\n                movieId: movie._id,\n              }}\n            >\n              <img\n                src={movie.image}\n                alt=\"movies\"\n                width=\"180px\"\n                height=\"270px\"\n              />\n            </Link>\n          </Col>\n        ))}\n      </Row>\n    </Container>\n  );\n}\n","import React from \"react\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport { Row, Container, Col, Spinner } from \"react-bootstrap\";\nimport \"./../styles/AllMovies.css\";\nimport { Link } from \"react-router-dom\";\n\n\nexport default function TopMovies({ movies }) {\n    const copy = [...movies]\n    copy.sort((a, b) => b.imDbRating.localeCompare(a.imDbRating))\n        return (\n    <Container>\n      <Row>\n        {copy.map((movie , i) => (\n          <Col key={i} className=\"movieblock\">\n\n            <Link\n              to={{\n                pathname: `/movie/${movie._id}`,\n                movieId: movie._id,\n              }}\n            >\n              <img\n                src={movie.image}\n                alt=\"movies\"\n                width=\"180px\"\n                height=\"270px\"\n              />\n            </Link>\n          </Col>\n        ))}\n      </Row>\n    </Container>\n  );\n}\n","import React, { Component } from \"react\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport { Container, Tabs, Tab,Row, Col, Spinner } from \"react-bootstrap\";\n// import { Link } from \"react-router-dom\";\nimport \"./../styles/home.css\";\nimport APIHandler from \"./../api/APIHandler\";\nimport AllMovies from \"../components/AllMovies\";\nimport TopMovies from \"../components/TopMovies\";\n\nexport default class Home extends Component {\n  state = {\n    movies: [],\n    searchString: '',\n  };\n  handleSearch = (text) => {\n    this.setState({searchString: text})\n  }\n  async componentDidMount() {\n    APIHandler.get(\"/movies\")\n      .then(({ data }) => {\n        console.log(\"movies\", data.length);\n        this.setState({\n          movies: data,\n        });\n      })\n      .catch((apiErr) => console.error(apiErr));\n  }\n\n  render() {\n    //Filter here \n    let moviesToDisplay = null\n\n    if (this.state.searchString !== '' && this.state.movies.length > 0) {\n      moviesToDisplay = this.state.movies.filter(movie => {\n        return movie?.title?.toLowerCase()?.includes(this.state.searchString.toLowerCase())\n      })\n    } else {\n      moviesToDisplay = [...this.state.movies]\n    }\n      return (\n        <div>\n        {!this.state.movies.length? (\n          <div className=\"jiazai\">\n          Waiting  \n            <Spinner animation=\"grow\" variant=\"dark\" size=\"sm\"/>\n            <Spinner animation=\"grow\" variant=\"dark\" size=\"sm\"/>\n            <Spinner animation=\"grow\" variant=\"dark\" size=\"sm\"/>\n            <Spinner animation=\"grow\" variant=\"dark\" size=\"sm\"/>\n            <Spinner animation=\"grow\" variant=\"dark\" size=\"sm\"/>\n          </div>\n        ) :(\n        <Container>\n        <Row>\n          <Col md={8}>\n          <input type=\"text\" placeholder=\"Search...\" className=\"inpSearch\" onChange={(e) => this.handleSearch(e.target.value)}/> \n          </Col>\n        </Row>\n          <Tabs\n            ActiveKey=\"eventKey\"\n            transition={true}\n            id=\"noanim-tab-example\"\n            className=\"mb-3\"\n            mountOnEnter=\"true\"\n            variant='pills'\n          >\n            <Tab eventKey=\"home\" title=\"All\n            \">\n              {moviesToDisplay.length && <AllMovies movies={moviesToDisplay} />}\n            </Tab>\n            <Tab eventKey=\"Top-Movies\" title=\"Top\">\n              <TopMovies movies={this.state.movies}/>\n            </Tab>\n          </Tabs>\n          </Container>\n        )}\n        </div>\n      );\n    }\n  }\n\n","import React, { useContext, useState, useEffect } from \"react\";\nimport APIHandler from \"./../api/APIHandler\";\n\nexport const UserContext = React.createContext();\n\n/**\n *\n * @param {Object} props\n * @returns a Provider wrappinng the authentication logic\n */\nexport const UserContextProvider = (props) => {\n  const [currentUser, setCurrentUser] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    APIHandler.get(\"/is-loggedin\")\n      .then((res) => {\n        setIsLoading(false);\n        setCurrentUser(res.data.currentUser);\n      })\n      .catch(() => {\n        setCurrentUser(null);\n        setIsLoading(false);\n      });\n  }, []);\n\n  const isLoggedIn = Boolean(currentUser); // checked on every render => passed to the\n\n  return (\n    <UserContext.Provider\n      value={{ currentUser, isLoading, isLoggedIn, setCurrentUser }}\n    >\n      {!isLoading ? props.children : null}\n    </UserContext.Provider>\n  );\n};\n\n/**\n * provide the UserContext to class/ based components\n * in  classes, the UserContext is bound to this.props.userContext\n * @param {React.Component} MyComponent any class based component\n * @returns A consumer component accessign the values exposed by the UserContext\n */\nexport const withAuth = (MyComponent) => {\n  return (props) => {\n    return (\n      <UserContext.Consumer>\n        {(context) => {\n          return <MyComponent {...props} userContext={context} />;\n        }}\n      </UserContext.Consumer>\n    );\n  };\n};\n\n/**\n * a utility function (shortcut) so you don't have to import the Context + useContext in you app's functionnal components\n * @returns\n */\nexport const useAuth = () => useContext(UserContext);\n","import React, { useState } from \"react\";\n\nimport { Link, Redirect } from \"react-router-dom\";\n// custom tools\nimport { useAuth } from \"../auth/UserContext\";\nimport APIHandler from \"../api/APIHandler\";\nimport \"./../styles/form.css\";\nimport { Container } from \"react-bootstrap\";\n\nexport default function Signin(props) {\n  const [email, setEmail] = useState(\"admin@foobarbaz.io\");\n  const [password, setPassword] = useState(\"12345\");\n  const { isLoggedIn, setCurrentUser } = useAuth();\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      const apiRes = await APIHandler.post(\"/signin\", { email, password });\n      setCurrentUser(apiRes.data.currentUser);\n    } catch (err) {\n      setCurrentUser(null);\n    }\n  };\n\n  return isLoggedIn ? (\n    <Redirect to=\"/dashboard\" />\n  ) : (\n    <Container>\n    <form className=\"form\" onSubmit={handleSubmit}>\n      <h1 className=\"title\">Signin</h1>\n      <label className=\"label\" htmlFor=\"email\">\n        email\n      </label>\n      <input\n        className=\"input\"\n        id=\"email\"\n        type=\"email\"\n        value={email}\n        onChange={(e) => setEmail(e.target.value)}\n      />\n      <label className=\"label\" htmlFor=\"password\">\n        password\n      </label>\n      <input\n        className=\"input\"\n        id=\"password\"\n        type=\"password\"\n        value={password}\n        onChange={(e) => setPassword(e.target.value)}\n      />\n      <button className=\"btn\">ok</button>\n      <p className=\"parag\">\n        No account yet ? please{\" \"}\n        <Link to=\"/signup\" className=\"link\">\n          signup\n        </Link>\n      </p>\n    </form>\n    </Container>\n  );\n}\n","import React from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faCog } from \"@fortawesome/free-solid-svg-icons\";\n\nexport default function IconAvatar({ clbk, avatar= \"\"}) {\n  const fileInput = React.createRef();\n\n  const handleClick = () => {\n    fileInput.current.click();\n  };\n\n  return (\n    <div className={\"is-clickable icon-avatar\"} title=\"change avatar\">\n      {avatar && <img src={avatar} alt=\"user avatar\" />}\n      <input\n        ref={fileInput}\n        type=\"file\"\n        className=\"is-hidden\"\n        onChange={clbk}\n      />\n      <FontAwesomeIcon\n        onClick={handleClick}\n        className=\"is-clickable fa-lg\"\n        icon={faCog}\n      />\n    </div>\n  );\n}\n","import React, { Component } from \"react\";\nimport { Link, Redirect } from \"react-router-dom\";\n// custom tools\nimport { Container } from \"react-bootstrap\";\nimport APIHandler from \"../api/APIHandler\";\nimport IconAvatarAdmin from \"../components/icon/IconAvatarAdmin\";\nimport { withAuth } from \"../auth/UserContext\";\n// styles\nimport \"./../styles/form.css\";\nimport \"./../styles/icon-avatar.css\";\n\nclass Signup extends Component {\n  state = {\n    avatar: \"\",\n    tmpAvatar: \"/imag/Avatar.jpeg\",\n    username: \"admin\",\n    email: \"admin@foobarbaz.io\",\n    password: \"12345\",\n  };\n\n  handleSubmit = async (e) => {\n    e.preventDefault();\n\n    const fd = new FormData();\n    // create a form data (programatic form, to send the file as binary)\n    fd.append(\"email\", this.state.email);\n    fd.append(\"password\", this.state.password);\n    fd.append(\"username\", this.state.username);\n    fd.append(\"avatar\", this.state.avatar);\n\n    try {\n      await APIHandler.post(\"/signup\", fd);\n      this.props.history.push(\"/signin\");\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  handleChange = (e) => {\n    this.setState({ [e.target.name]: e.target.value });\n  };\n\n  handleImage = (e) => {\n    // console.log(\"Signup@handle image\", e.target.files[0]);\n    this.setState({ avatar: e.target.files[0] }, () => {\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        // when the fileREader ends  ...\n        const baseString = reader.result; // get the image as a base64 encoded string\n        this.setState({ tmpAvatar: baseString }); // set the tmp avatar as an image source before upload\n      };\n      reader.readAsDataURL(this.state.avatar); // read the file from the local disk\n    });\n  };\n\n  render() {\n    // console.log(this.props);\n    const { isLoggedIn } = this.props.userContext;\n    const { email, password, username, tmpAvatar } = this.state;\n    return isLoggedIn ? (\n      // avoid the component to be rendered if user is already logged in\n      <Redirect to=\"/dashboard\" />\n    ) : (\n      <Container>\n      <form\n        className=\"form\"\n        onSubmit={this.handleSubmit}\n        onChange={this.handleChange}\n      >\n        <h1 className=\"title\">Signup</h1>\n        <label className=\"label\" id=\"avatar\" htmlFor=\"avatar\">\n        <IconAvatarAdmin avatar={tmpAvatar} clbk={this.handleImage} />\n        </label>\n        <label className=\"label\" htmlFor=\"email\">\n          Email\n        </label>\n        <input\n          className=\"input\"\n          id=\"email\"\n          type=\"email\"\n          name=\"email\"\n          defaultValue={email}\n        />\n        <label className=\"label\" htmlFor=\"username\">\n          Username\n        </label>\n        <input\n          className=\"input\"\n          id=\"username\"\n          type=\"text\"\n          name=\"username\"\n          defaultValue={username}\n        />\n        <label className=\"label\" htmlFor=\"password\">\n          Password\n        </label>\n        <input\n          className=\"input\"\n          id=\"password\"\n          type=\"password\"\n          name=\"password\"\n          defaultValue={password}\n        />\n        <button className=\"btn\">OK</button>\n        <p className=\"parag\">\n          Already a member ? please{\" \"}\n          <Link to=\"/signin\" className=\"link\">\n            signin\n          </Link>\n        </p>\n      </form>\n      </Container>\n    );\n  }\n}\n\nexport default withAuth(Signup);\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nexport default function Page404() {\n  return (\n    <div>\n      Oh no !!!\n      <br />\n      You seem lost friend :( <br />\n      Go back to the &nbsp;<Link to=\"/\">home page</Link>\n    </div>\n  );\n}\n","import React, { Component } from \"react\";\nimport APIHandler from \"../../api/APIHandler\";\nimport { Form, Button }from \"react-bootstrap\"\n// comment recuperer le user connecte dans ce composqnt \n// pour envoyer le id_author dans le post /comments ?\n\nexport default class FormCreateComment extends Component {\n  state = {\n    inputText: \"\",\n  };\n\n  handleInputText = (val) => {\n    this.setState({\n      inputText: val.target.value,\n    });\n  };\n\n  handleAddComment = (e) => {\n    // console.log(\"here\");\n    let myComment = {\n      comment: this.state.inputText,\n      rate: \"3\",\n      id_film: this.props.movieId,\n      id_author: \"618ffb3532facccdf54b37dc\"\n    };\n    // console.log(\"be4 post\");\n    APIHandler.post(\"/comments\", myComment)\n      .then((res) => {\n        // console.log(\"after post result\");\n        // passer l'info au parent (un comme nt a été ajouté )\n        // le parent fetch tousles comments (les anciens + le nouveau) puis setState(comments)\n        // du coup re-render et on peut afficher la liste des comments\n        console.log(res);\n        console.log(this.props);\n        this.props.fetchAllComments(this.props.movieId);\n      })\n      .catch((apiErr) => console.error(apiErr));\n    // console.log(\"after post\");\n  };\n\n  render() {\n    // function simulateNetworkRequest() {\n    //   return new Promise((resolve) => setTimeout(resolve, 2000));\n    // }\n    \n    // function LoadingButton() {\n    //   const [isLoading, setLoading] = useState(false);\n    \n    //   useEffect(() => {\n    //     if (isLoading) {\n    //       simulateNetworkRequest().then(() => {\n    //         setLoading(false);\n    //       });\n    //     }\n    //   }, [isLoading]);\n    \n    //   const handleClick = () => setLoading(true);\n    return (\n      <div>\n      <Form>\n          <Form.Group className=\"mb-3\" controlId=\"exampleForm.ControlTextarea1\">\n          <Form.Control as=\"textarea\" placeholder=\"Comment Here...\" rows={2} onChange={(value) => this.handleInputText(value)}/>\n          {' '}</Form.Group>\n      </Form>\n        <Button \n        variant=\"primary\"\n        // disabled={isLoading}\n        // onClick={!isLoading ? handleClick : null}\n        onClick={() => this.handleAddComment()} size=\"lg\">\n          Send\n        </Button>\n      </div>\n    );\n    \n  }\n}  \n","import React, { useState, useEffect } from \"react\";\nimport APIHandler from \"../api/APIHandler\";\nimport {useAuth} from '../auth/UserContext'\nconst StarRating = ({film}) => {\n    const [rating, setRating] = useState(0);\n    const [hover, setHover] = useState(0);\n    const [alreadyRated, setAlreadyRated] = useState(false)\n    const {currentUser} = useAuth()\n    useEffect(() => {\n      if(currentUser) {\n        APIHandler.get(`/rates/${currentUser._id}/${film}`)\n        .then(() => {\n          setAlreadyRated(true)\n        })\n        .catch(() => {\n          setAlreadyRated(false)\n        })\n      }\n    },[])\n\n  useEffect(() => {\n    if (!alreadyRated) {\n      APIHandler.post('/rates/'+ film, {rate:rating, id_author: currentUser?._id, id_film: film}).then((doc) => {\n       \n      }).catch(e => console.error(e))\n    }\n  },[rating, film, alreadyRated])\n\n    return (\n      <div className=\"star-rating\">\n        {[...Array(5)].map((star, index) => {\n          index += 1;\n          return (\n            <button\n              type=\"button\"\n              key={index}\n              className={index <= (hover || rating) ? \"on\" : \"off\"}\n              onClick={() => setRating(index)}\n              onMouseEnter={() => setHover(index)}\n              onMouseLeave={() => setHover(rating)}\n            >\n              <span className=\"star\">&#9733;</span>\n            </button>\n\n          );\n        })}\n      </div>\n    );\n  };\n\nexport default StarRating\n\n","import React from \"react\";\n\nconst UserStarRatingDisplay = ({rating}) => {\n\n  // ajouter les notes pour chaque film\n\n  console.log(rating)\n    return (\n      <div className=\"star-rating\">\n      {/* if(!rating) {\n        \"No user's rating yet\"\n      } */}\n        {[...Array(5)].map((star, index) => {\n\n          return (\n            <button\n              type=\"button\"\n              key={index}\n              className={index + 1 <= rating  ? \"on\" : \"off\"}\n            >\n              <span className=\"star\">&#9733;</span>\n            </button>\n\n          );\n        })}\n      </div>\n    );\n  };\n\nexport default UserStarRatingDisplay\n\n","import React, { Component } from \"react\";\nimport APIHandler from \"./../api/APIHandler\";\nimport { Container, Row, Col, Button} from \"react-bootstrap\";\nimport \"./../styles/MovieDetail.css\";\nimport FormCreateComment from \"../components/form/FormCreateComment\";\nimport { Link } from \"react-router-dom\";\n// import LikeButton from \"../components/LikeButton\";\nimport { withRouter } from \"react-router-dom\";\nimport StarRating from \"../components/StarRating.jsx\";\nimport UserStarRatingDisplay from \"../components/UserStarRatingDisplay\";\nimport \"./../styles/stars.css\";\nimport { withAuth } from \"./../auth/UserContext.js\";\n\nclass MovieDetail extends Component {\n  state = {\n    title: \"\",\n    year: \"\",\n    image: \"\",\n    director: \"\",\n    duration: \"\",\n    plot: \"\",\n    actorList: [\n      {\n        image: \"\",\n        name: \"\",\n      },\n    ],\n    genreList: [\n      {\n        value: \"\",\n      },\n    ],\n    imDbRating: \"\",\n    usersRating: [],\n    comments: [],\n    avgRate: null\n  };\n\n  async componentDidMount() {\n    // console.log(\"MovieDetqils componentDidMount\");\n    // console.log(\"====================================\");\n    // console.log(this.props.currentUser);\n    // console.log(\"====================================\");\n    //   console.log(this.props.location.movieId)\n    //this.props are properties you give to an object when you create so you can access/use them\n    //for ex Link with a props \"to=\" create a new object (movie detail) and provide its properties\n    APIHandler.get(`/movie/${this.props.match.params.id}`)\n      .then(({ data }) => {\n        this.setState(\n          {\n            title: data.title,\n            year: data.year,\n            director: data.directors,\n            duration: data.runtimeMins,\n            plot: data.plot,\n            image: data.image,\n            actorList: data.actorList,\n            genreList: data.genreList,\n            imDbRating: data.imDbRating,\n            // usersRating: data.usersRating,\n          },\n          () => {\n            this.fetchAllComments(this.props.match.params.id);\n          }\n        );\n      })\n      .catch((apiErr) => console.error(apiErr));\n    this.fetchAllRatings(this.props.match.params.id);\n  }\n  // aussi fetch tous les comments de ce films et setState comments\n  componentDidUpdate(prevProps, prevState) {\n    // let tmp\n    // if (prevProps === this.state) {\n    //   let avgRate = 0\n    //   if (this.state.usersRating.length > 0) {\n    //    tmp = (\n    //       this.state.usersRating.reduce((acc, val) => acc + val.rate, 0) /\n    //       this.state.usersRating.length\n    //     ).toFixed(2);\n    //   }\n      \n    // }\n    // this.setState({\n    //   avgRate: tmp,\n    // })\n  }\n  fetchAllComments = async (id) => {\n    // console.log(\"fetchAllComments\");\n    // console.log(id);\n\n    // req ajax ici\n    try {\n      const res = await APIHandler.get(\"/comments/\" + id);\n      // console.log(\"fetched all comments for ID\", id, res.data);\n      this.setState({\n        comments: res.data,\n      });\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  fetchAllRatings = async (id) => {\n    try {\n      const res = await APIHandler.get(\"/rates/\" + id);\n      this.setState({\n        usersRating: res.data,\n      });\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  handleDelete = async (id) => {\n    try {\n      await APIHandler.delete(`/comments/${id}`);\n      this.fetchAllComments(this.props.match.params.id);\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  handleEditComment = async (e, id, text) => {\n    console.log(e.code);\n    if (e.key === \"Enter\") {\n      try {\n        await APIHandler.patch(`/comments/${id}`, { comment: text });\n        this.fetchAllComments(this.props.match.params.id);\n      } catch (err) {\n        console.error(err);\n      }\n    }\n  };\n\n  render() {\n    // console.log(this.props)\n    // console.log(\"render()\");\n    // console.log(this.state.usersRating);\n    let avgRate = 0;\n    if (this.state.usersRating.length > 0) {\n      avgRate = (\n        this.state.usersRating.reduce((acc, val) => acc + val.rate, 0) /\n        this.state.usersRating.length\n        ).toFixed(2);\n      }\n      const Xmas = new Date(this.state.year);\n      console.log(Xmas);\n      const year = Xmas.getFullYear(); // returns -100\n    return (\n      <Container>\n        <br />\n        <h1>{this.state.title}  <span className=\"year\">({year})</span></h1>\n        <br />\n        <Row className=\"bodydetail\">\n          <Col md=\"auto\" className=\"colImag\">\n            <img src={this.state.image} alt=\"one-movie\" width=\"200px\" />\n          </Col>\n\n          <Col md={5} className=\"infoText\">\n            <span>Director: {this.state.director}</span>\n            <br />\n            <span>Duration: {this.state.duration}min</span>\n            <br />\n            {/* <span className=\"AGlist\">\n              Actors:{\" \"}\n              {this.state.actorList.map((actor, i) => (\n                <h6 key={i}>{actor.name} /</h6>\n              ))}\n            </span>\n            <br /> */}\n            <span>IMDB rating : {this.state.imDbRating}</span>\n            <br />\n            <span className=\"AGlist\">\n              Genre :{\" \"}\n              {this.state.genreList.map((genre, i) => (\n                <h6 key={i}>{genre.value} /</h6>\n              ))}\n            </span>\n            <br />\n            <p>{this.state.avgRate}</p>\n            <span className=\"rating\">\n              User's rating : <UserStarRatingDisplay rating={this.state.avgRate} />\n            </span>\n          </Col>\n          <Row>\n            <Col md={10}>\n              <span>\n                {this.state.actorList.map((actor, i) => (\n                  <Link to=\"/actor/:id\" className=\"actorblok\" key={i}>\n                    <img\n                      className=\"actorimgs\"\n                      src={actor.image}\n                      alt={actor.name}\n                    />\n                    {actor.name}\n                  </Link>\n                ))}\n              </span>\n            </Col>\n          </Row>\n        </Row>\n        <Col md={8} className=\"plot\">\n          <h5>{this.state.title}</h5>\n          <h6>{this.state.plot}</h6>\n        </Col>\n        {/* <Row>\n          <StarRating film={this.props.match.params.id} />\n          <FormCreateComment\n            fetchAllComments={this.fetchAllComments}\n            movieId={this.props.match.params.id}\n          />\n        </Row> */}\n        {this.state.comments.map((comment, i) => {\n          return (\n            <>\n              <div\n                contentEditable= {\n                this.props.currentUser?._id === comment.id_author || true\n                }\n                key={i}\n                className=\"2\"\n                onKeyPress={(e) =>\n                  this.handleEditComment(\n                    e,\n                    comment._id,\n                    e.currentTarget.textContent\n                  )\n                }\n              >\n                {comment.comment}\n              </div>\n              <Button onClick={() => this.handleDelete(comment._id)} variant=\"warning\">\n                Delete\n              </Button>\n            </>\n          );\n        })}\n        <Row>\n          <Col md={6}>\n          <StarRating film={this.props.match.params.id} />\n          <FormCreateComment\n            fetchAllComments={this.fetchAllComments}\n            movieId={this.props.match.params.id}\n          />\n          </Col>\n        </Row>\n      </Container>\n    );\n  }\n}\nexport default withRouter(withAuth(MovieDetail));\n","import React, { Component } from \"react\";\n// // import APIHandler from \"./../api/APIHandler\";\n// // import { withAuth } from \"./../auth/UserContext.js\";\n// import { Link, Redirect } from \"react-router-dom\";\n// // custom tools\nimport { Container } from \"react-bootstrap\";\n// import APIHandler from \"../api/APIHandler\";\nimport IconAvatarAdmin from \"../components/icon/IconAvatarAdmin\";\nimport { withAuth } from \"../auth/UserContext\";\n// // styles\n// import \"./../styles/form.css\";\n// import \"./../styles/icon-avatar.css\";\n\nclass MyAccount extends Component {\n  state = {\n    avatar: \"\",\n    tmpAvatar: \"/imag/Avatar.jpeg\",\n    username: \"admin\",\n    email: \"admin@foobarbaz.io\",\n    password: \"12345\",\n  };\n   \n\n\n  render() {\n    const { email, password, username, tmpAvatar } = this.state;\n\n    return (\n    \n    <Container>\n       <h1 className=\"title\">My Account</h1>\n\n        <label className=\"label\" id=\"avatar\" htmlFor=\"avatar\">\n         <IconAvatarAdmin avatar={this.state.tmpAvatar} />\n        </label>\n\n        <p className=\"label\" htmlFor=\"email\">\n           {this.state.email} \n        </p>\n     \n        <p className=\"label\" htmlFor=\"username\">\n          {this.state.username}\n        </p>\n        \n\n    </Container>\n   );\n  }\n}\n\nexport default withAuth(MyAccount) // HOC => encapsule ta classe et lui donne en props les infos de l'auth\n\n// //on veut display seulement les films que le user a commenté/raté\n","import React, { Component } from \"react\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport { Link } from \"react-router-dom\";\nimport \"./../styles/nav.css\";\nimport { Container, Navbar, Nav } from \"react-bootstrap\";\nimport { withAuth } from \"../auth/UserContext\";\nimport IconAvatarAdmin from \"../components/icon/IconAvatarAdmin\";\n\nclass Navi extends Component {\n  state = {\n    searchField: \"\",\n    movies: [],\n    stats: [],\n    tmpAvatar:\"/imag/Avatar.jpeg\"\n  }\n  \n  render() {\n    console.log(withAuth.tmpAvatar);\n    const { currentUser } = withAuth();\n\n    return (\n      <Navbar bg=\"dark\" expand=\"sm\">\n        <Container>\n            <Link to=\"/\">\n              <img\n                src=\"/imag/movie logo.png\"\n                alt=\"movielogo\"\n                className=\"movielogo\"\n              />\n            </Link>\n            \n            <span className=\"ourname\">CINEHOME</span>\n\n          <Nav className=\"text-center mt-4 mb-4\">\n          {!this.props.userContext?.isLoggedIn ? \n          (<Link to=\"/signin\" className=\"Signin\">Signin</Link>) \n          : (<Link to=\"/dashboard\" className=\"myaccount\">\n            <Link to=\"/signout\" className=\"signout\">Signout</Link> \n            <IconAvatarAdmin avatar = {this.state.tmpAvatar} />\n            </Link>)}\n          </Nav>\n\n        </Container>\n      </Navbar>\n    );\n  }\n}\n\nexport default withAuth(Navi)","import React from \"react\";\nimport { Route, Switch } from \"react-router-dom\";\n// pages components\nimport Home from \"./views/Home\";\n// import Dashboard from \"./views/Dashboard\";\nimport Signin from \"./views/Signin\";\nimport Signup from \"./views/Signup\";\nimport NotFound from \"./views/NotFound\";\nimport MovieDetail from \"./views/MovieDetail\";\nimport MyAccount from \"./views/MyAccount\";\n\n\n// partials\nimport NavMain from \"./components/Nav\";\n// auth\nimport { UserContextProvider } from \"./auth/UserContext\";\n// import { ProtectedRoute } from \"./auth/ProtectedRoute\";\n// styles\n// import \"./styles/nav.css\";\n\nexport default function App() {\n\n\n  \n\n  return (\n    <UserContextProvider>\n      <>\n        <header>\n          <NavMain />\n        </header>\n        <main id=\"content_main\">\n         <Switch>\n            <Route exact path=\"/\" component={Home} />\n            <Route path=\"/signin\" component={Signin} />\n            <Route path=\"/signup\" component={Signup} />\n            <Route path=\"/movie/:id\" component={MovieDetail} />\n            {/* check the protected route in src/auth folder */}\n            <Route path=\"/dashboard\" component={MyAccount} />\n            {/* <Route path=\"/comment\" component={Comment} /> */}\n            <Route path=\"*\" component={NotFound} />\n            <Route path=\"/signout\" component={Home} />\n          </Switch> \n        </main>\n        <footer>&copy;Priscilla | Joey | Yuki</footer>\n      </>\n    </UserContextProvider>\n  );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n// import './index.css';\nimport App from './App';\nimport { BrowserRouter } from \"react-router-dom\";\n// import reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n  <BrowserRouter>\n    <App />\n  </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n"],"sourceRoot":""}