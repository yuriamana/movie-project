(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{122:function(e,t,n){},123:function(e,t,n){},124:function(e,t,n){},125:function(e,t,n){},126:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(31),s=n.n(c),i=n(11),o=n(27),l=n(10),u=n.n(l),j=n(20),m=n(15),h=n(16),b=n(19),d=n(18),p=(n(47),n(129)),O=n(130),f=n(83),x=n(135),v=n(136),g=(n(95),n(82)),y=n.n(g).a.create({baseURL:"http://localhost:5000/api",withCredentials:!0}),N=(n(78),n(12)),w=n(1);function k(e){var t=e.movies,n=Object(o.a)(t);return n.sort((function(){return Math.random()-.5})),Object(w.jsx)(p.a,{children:Object(w.jsx)(O.a,{children:n.map((function(e,t){return Object(w.jsx)(f.a,{className:"movieblock",children:Object(w.jsx)(N.b,{to:{pathname:"/movie/".concat(e._id),movieId:e._id},children:Object(w.jsx)("img",{src:e.image,alt:"movies",width:"180px",height:"270px"})})},t)}))})})}var C=n(131);function S(e){var t=e.movies;if(t){C.a;var n=Object(o.a)(t);return n.sort((function(e,t){return t.imDbRating.localeCompare(e.imDbRating)})),Object(w.jsx)(p.a,{children:Object(w.jsx)(O.a,{children:n.map((function(e,t){return Object(w.jsx)(f.a,{className:"movieblock",children:Object(w.jsx)(N.b,{to:{pathname:"/movie/".concat(e._id),movieId:e._id},children:Object(w.jsx)("img",{src:e.image,alt:"movies",width:"180px",height:"270px"})})},t)}))})})}}var A=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={movies:[],searchString:""},e.handleSearch=function(t){e.setState({searchString:t})},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=Object(j.a)(u.a.mark((function e(){var t=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y.get("/movies").then((function(e){var n=e.data;console.log("movies",n),t.setState({movies:n})})).catch((function(e){return console.error(e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=null;return t=""!==this.state.searchString&&this.state.movies.length>0?this.state.movies.filter((function(t){var n,a;return null===t||void 0===t||null===(n=t.title)||void 0===n||null===(a=n.toLowerCase())||void 0===a?void 0:a.includes(e.state.searchString.toLowerCase())})):Object(o.a)(this.state.movies),Object(w.jsx)("div",{children:Object(w.jsxs)(p.a,{children:[Object(w.jsx)(O.a,{children:Object(w.jsx)(f.a,{md:8,children:Object(w.jsx)("input",{type:"text",placeholder:"Search...",className:"inpSearch",onChange:function(t){return e.handleSearch(t.target.value)}})})}),Object(w.jsxs)(x.a,{ActiveKey:"eventKey",transition:!0,id:"noanim-tab-example",className:"mb-3",mountOnEnter:"true",variant:"pills",children:[Object(w.jsx)(v.a,{eventKey:"home",title:"Home",children:t.length&&Object(w.jsx)(k,{movies:t})}),Object(w.jsx)(v.a,{eventKey:"Top-Movies",title:"Top",children:Object(w.jsx)(S,{movies:this.state.movies.splice(5,10)})})]})]})})}}]),n}(a.Component),D=n(7),L=n(2),I=r.a.createContext(),R=function(e){var t=Object(a.useState)(null),n=Object(D.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(!0),i=Object(D.a)(s,2),o=i[0],l=i[1];Object(a.useEffect)((function(){y.get("/is-loggedin").then((function(e){l(!1),c(e.data.currentUser)})).catch((function(){c(null),l(!1)}))}),[]);var u=Boolean(r);return Object(w.jsx)(I.Provider,{value:{currentUser:r,isLoading:o,isLoggedIn:u,setCurrentUser:c},children:o?null:e.children})},_=function(e){return function(t){return Object(w.jsx)(I.Consumer,{children:function(n){return Object(w.jsx)(e,Object(L.a)(Object(L.a)({},t),{},{userContext:n}))}})}},F=function(){return Object(a.useContext)(I)};n(80);function E(e){var t=Object(a.useState)("admin@foobarbaz.io"),n=Object(D.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)("12345"),o=Object(D.a)(s,2),l=o[0],m=o[1],h=F(),b=h.isLoggedIn,d=h.setCurrentUser,O=function(){var e=Object(j.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,y.post("/signin",{email:r,password:l});case 4:n=e.sent,d(n.data.currentUser),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),d(null);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return b?Object(w.jsx)(i.a,{to:"/dashboard"}):Object(w.jsx)(p.a,{children:Object(w.jsxs)("form",{className:"form",onSubmit:O,children:[Object(w.jsx)("h1",{className:"title",children:"Signin"}),Object(w.jsx)("label",{className:"label",htmlFor:"email",children:"email"}),Object(w.jsx)("input",{className:"input",id:"email",type:"email",value:r,onChange:function(e){return c(e.target.value)}}),Object(w.jsx)("label",{className:"label",htmlFor:"password",children:"password"}),Object(w.jsx)("input",{className:"input",id:"password",type:"password",value:l,onChange:function(e){return m(e.target.value)}}),Object(w.jsx)("button",{className:"btn",children:"ok"}),Object(w.jsxs)("p",{className:"parag",children:["No account yet ? please"," ",Object(w.jsx)(N.b,{to:"/signup",className:"link",children:"signup"})]})]})})}var M=n(8),U=n(87),T=n(88);function K(e){var t=e.clbk,n=e.avatar,a=void 0===n?"":n,c=r.a.createRef();return Object(w.jsxs)("div",{className:"is-clickable icon-avatar",title:"change avatar",children:[a&&Object(w.jsx)("img",{src:a,alt:"user avatar"}),Object(w.jsx)("input",{ref:c,type:"file",className:"is-hidden",onChange:t}),Object(w.jsx)(U.a,{onClick:function(){c.current.click()},className:"is-clickable fa-lg",icon:T.a})]})}n(122);var G=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={avatar:"",tmpAvatar:"/imag/Avatar.jpeg",username:"admin",email:"admin@foobarbaz.io",password:"12345"},e.handleSubmit=function(){var t=Object(j.a)(u.a.mark((function t(n){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),(a=new FormData).append("email",e.state.email),a.append("password",e.state.password),a.append("username",e.state.username),a.append("avatar",e.state.avatar),t.prev=6,t.next=9,y.post("/signup",a);case 9:e.props.history.push("/signin"),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(6),console.error(t.t0);case 15:case"end":return t.stop()}}),t,null,[[6,12]])})));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(t){e.setState(Object(M.a)({},t.target.name,t.target.value))},e.handleImage=function(t){e.setState({avatar:t.target.files[0]},(function(){var t=new FileReader;t.onloadend=function(){var n=t.result;e.setState({tmpAvatar:n})},t.readAsDataURL(e.state.avatar)}))},e}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props.userContext.isLoggedIn,t=this.state,n=t.email,a=t.password,r=t.username,c=t.tmpAvatar;return e?Object(w.jsx)(i.a,{to:"/dashboard"}):Object(w.jsx)(p.a,{children:Object(w.jsxs)("form",{className:"form",onSubmit:this.handleSubmit,onChange:this.handleChange,children:[Object(w.jsx)("h1",{className:"title",children:"Signup"}),Object(w.jsx)("label",{className:"label",id:"avatar",htmlFor:"avatar",children:Object(w.jsx)(K,{avatar:c,clbk:this.handleImage})}),Object(w.jsx)("label",{className:"label",htmlFor:"email",children:"Email"}),Object(w.jsx)("input",{className:"input",id:"email",type:"email",name:"email",defaultValue:n}),Object(w.jsx)("label",{className:"label",htmlFor:"username",children:"Username"}),Object(w.jsx)("input",{className:"input",id:"username",type:"text",name:"username",defaultValue:r}),Object(w.jsx)("label",{className:"label",htmlFor:"password",children:"Password"}),Object(w.jsx)("input",{className:"input",id:"password",type:"password",name:"password",defaultValue:a}),Object(w.jsx)("button",{className:"btn",children:"OK"}),Object(w.jsxs)("p",{className:"parag",children:["Already a member ? please"," ",Object(w.jsx)(N.b,{to:"/signin",className:"link",children:"signin"})]})]})})}}]),n}(a.Component),P=_(G);function J(){return Object(w.jsxs)("div",{children:["Oh no !!!",Object(w.jsx)("br",{}),"You seem lost friend :( ",Object(w.jsx)("br",{}),"Go back to the \xa0",Object(w.jsx)(N.b,{to:"/",children:"home page"})]})}var z=n(132),B=(n(123),n(134)),V=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={inputText:""},e.handleInputText=function(t){e.setState({inputText:t.target.value})},e.handleAddComment=function(t){var n={comment:e.state.inputText,rate:"3",id_film:e.props.movieId,id_author:"618ffb3532facccdf54b37dc"};y.post("/comments",n).then((function(t){console.log(t),console.log(e.props),e.props.fetchAllComments(e.props.movieId)})).catch((function(e){return console.error(e)}))},e}return Object(h.a)(n,[{key:"render",value:function(){var e=this;return Object(w.jsxs)("div",{children:[Object(w.jsx)(B.a,{children:Object(w.jsxs)(B.a.Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea1",children:[Object(w.jsx)(B.a.Control,{as:"textarea",placeholder:"Comment Here...",rows:2,onChange:function(t){return e.handleInputText(t)}})," "]})}),Object(w.jsx)(z.a,{variant:"primary",onClick:function(){return e.handleAddComment()},size:"lg",children:"Send"})]})}}]),n}(a.Component),Y=function(e){var t=e.film,n=Object(a.useState)(0),r=Object(D.a)(n,2),c=r[0],s=r[1],i=Object(a.useState)(0),l=Object(D.a)(i,2),u=l[0],j=l[1],m=Object(a.useState)(!1),h=Object(D.a)(m,2),b=h[0],d=h[1],p=F().currentUser;return Object(a.useEffect)((function(){p&&y.get("/rates/".concat(p._id,"/").concat(t)).then((function(){d(!0)})).catch((function(){d(!1)}))}),[]),Object(a.useEffect)((function(){b||y.post("/rates/"+t,{rate:c,id_author:null===p||void 0===p?void 0:p._id,id_film:t}).then((function(e){console.log("cool",e)})).catch((function(e){return console.error(e)}))}),[c,t,b]),Object(w.jsx)("div",{className:"star-rating",children:Object(o.a)(Array(5)).map((function(e,t){return t+=1,Object(w.jsx)("button",{type:"button",className:t<=(u||c)?"on":"off",onClick:function(){return s(t)},onMouseEnter:function(){return j(t)},onMouseLeave:function(){return j(c)},children:Object(w.jsx)("span",{className:"star",children:"\u2605"})},t)}))})},H=function(e){var t=e.rating;return console.log(t),Object(w.jsx)("div",{className:"star-rating",children:Object(o.a)(Array(5)).map((function(e,n){return Object(w.jsx)("button",{type:"button",className:n+1<=t?"on":"off",children:Object(w.jsx)("span",{className:"star",children:"\u2605"})},n)}))})},q=(n(124),function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={title:"",year:"",image:"",director:"",duration:"",plot:"",actorList:[{image:"",name:""}],genreList:[{value:""}],imDbRating:"",usersRating:[],comments:[]},e.fetchAllComments=function(){var t=Object(j.a)(u.a.mark((function t(n){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.get("/comments/"+n);case 3:a=t.sent,e.setState({comments:a.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),e.fetchAllRatings=function(){var t=Object(j.a)(u.a.mark((function t(n){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.get("/rates/"+n);case 3:a=t.sent,e.setState({usersRating:a.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),e.handleDelete=function(){var t=Object(j.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.delete("/comments/".concat(n));case 3:e.fetchAllComments(e.props.match.params.id),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.error(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),e.handleEditComment=function(){var t=Object(j.a)(u.a.mark((function t(n,a,r){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(n.code),"Enter"!==n.key){t.next=11;break}return t.prev=2,t.next=5,y.patch("/comments/".concat(a),{comment:r});case 5:e.fetchAllComments(e.props.match.params.id),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e,n,a){return t.apply(this,arguments)}}(),e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=Object(j.a)(u.a.mark((function e(){var t=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y.get("/movie/".concat(this.props.match.params.id)).then((function(e){var n=e.data;t.setState({title:n.title,year:n.year,director:n.directors,duration:n.runtimeMins,plot:n.plot,image:n.image,actorList:n.actorList,genreList:n.genreList,imDbRating:n.imDbRating},(function(){t.fetchAllComments(t.props.match.params.id)}))})).catch((function(e){return console.error(e)})),this.fetchAllRatings(this.props.match.params.id);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=0;return this.state.usersRating.length>0&&(t=(this.state.usersRating.reduce((function(e,t){return e+t.rate}),0)/this.state.usersRating.length).toFixed(2)),Object(w.jsxs)(p.a,{children:[Object(w.jsx)("br",{}),Object(w.jsxs)("h1",{children:[this.state.title," "]})," ",Object(w.jsxs)("span",{children:["(",this.state.year,")"]}),Object(w.jsx)("br",{}),Object(w.jsxs)(O.a,{className:"bodydetail",children:[Object(w.jsx)(f.a,{md:"auto",className:"colImag",children:Object(w.jsx)("img",{src:this.state.image,alt:"one-movie",width:"200px"})}),Object(w.jsxs)(f.a,{md:5,className:"infoText",children:[Object(w.jsxs)("span",{children:["Director: ",this.state.director]}),Object(w.jsx)("br",{}),Object(w.jsxs)("span",{children:["Duration: ",this.state.duration,"min"]}),Object(w.jsx)("br",{}),Object(w.jsxs)("span",{className:"AGlist",children:["Actors:"," ",this.state.actorList.map((function(e,t){return Object(w.jsxs)("h6",{children:[e.name," /"]},t)}))]}),Object(w.jsx)("br",{}),Object(w.jsxs)("span",{children:["IMDB rating : ",this.state.imDbRating]}),Object(w.jsx)("br",{}),Object(w.jsxs)("span",{className:"AGlist",children:["Genre :"," ",this.state.genreList.map((function(e,t){return Object(w.jsxs)("h6",{children:[e.value," /"]},t)}))]}),Object(w.jsx)("br",{}),Object(w.jsxs)("span",{className:"rating",children:["User's rating : ",Object(w.jsx)(H,{rating:t})]})]}),Object(w.jsx)(O.a,{children:Object(w.jsx)(f.a,{md:10,children:Object(w.jsx)("span",{children:this.state.actorList.map((function(e,t){return Object(w.jsxs)(N.b,{to:"/actor/:id",className:"actorblok",children:[Object(w.jsx)("img",{className:"actorimgs",src:e.image,alt:e.name}),e.name]},t)}))})})})]}),Object(w.jsxs)(f.a,{md:8,className:"plot",children:[Object(w.jsx)("h5",{children:this.state.title}),Object(w.jsx)("h6",{children:this.state.plot})]}),this.state.comments.map((function(t,n){var a;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{contentEditable:(null===(a=e.props.currentUser)||void 0===a?void 0:a._id)===t.id_author||!0,className:"2",onKeyPress:function(n){return e.handleEditComment(n,t._id,n.currentTarget.textContent)},children:t.comment},n),Object(w.jsx)(z.a,{onClick:function(){return e.handleDelete(t._id)},variant:"warning",children:"Delete"})]})})),Object(w.jsxs)(O.a,{children:[Object(w.jsx)(Y,{film:this.props.match.params.id}),Object(w.jsx)(V,{fetchAllComments:this.fetchAllComments,movieId:this.props.match.params.id})]})]})}}]),n}(a.Component)),Q=Object(i.g)(_(q)),W=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={commentedMovies:[]},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(this.props);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(w.jsx)("div",{children:"Commented movies"})}}]),n}(a.Component),X=_(W),Z=(n(125),n(133)),$=n(89),ee=function(e){Object(b.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={searchField:"",movies:[],stats:[]},e}return Object(h.a)(n,[{key:"render",value:function(){return Object(w.jsx)(Z.a,{bg:"dark",expand:"sm",children:Object(w.jsxs)(p.a,{children:[Object(w.jsx)(N.b,{to:"/",children:Object(w.jsx)("img",{src:"/imag/movie logo.png",alt:"movielogo",className:"movielogo"})}),Object(w.jsx)("span",{className:"ourname",children:"PYJ CINEMA"}),Object(w.jsx)($.a,{className:"text-center mt-4 mb-4",children:Object(w.jsx)(N.b,{to:"/signin",className:"Signin",children:"Signin"})})]})})}}]),n}(a.Component);function te(){return Object(w.jsx)(R,{children:Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("header",{children:Object(w.jsx)(ee,{})}),Object(w.jsx)("main",{id:"content_main",children:Object(w.jsxs)(i.d,{children:[Object(w.jsx)(i.b,{exact:!0,path:"/",component:A}),Object(w.jsx)(i.b,{path:"/signin",component:E}),Object(w.jsx)(i.b,{path:"/signup",component:P}),Object(w.jsx)(i.b,{path:"/movie/:id",component:Q}),Object(w.jsx)(i.b,{path:"/dashboard",component:X}),Object(w.jsx)(i.b,{path:"*",component:J})]})}),Object(w.jsx)("footer",{children:"\xa9Priscilla | Joey | Yuki"})]})})}s.a.render(Object(w.jsx)(r.a.StrictMode,{children:Object(w.jsx)(N.a,{children:Object(w.jsx)(te,{})})}),document.getElementById("root"))},78:function(e,t,n){},80:function(e,t,n){},95:function(e,t,n){}},[[126,1,2]]]);
//# sourceMappingURL=main.fed7b80f.chunk.js.map